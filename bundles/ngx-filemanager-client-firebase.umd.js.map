{"version":3,"file":"ngx-filemanager-client-firebase.umd.js","sources":["../../../projects/ngx-filemanager-client-firebase/src/lib/getBaseHref.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/ngx-filemanager-client-firebase/src/lib/services/logging/logger.service.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/dialog-rename.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/utils/path-helpers.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/dialog-copy-or-move.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/dialog-permissions-setobject.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/pure/notification.service.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/dialog-upload.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/dialog-new-folder.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/logging/console-logger.service.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/state/client-filesystem.cache.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/state/client-filesystem.datastore.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/utils/file-icon-guesser.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/pure/icon-url-resolver.service.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/utils/file.factory.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/pure/client-filesystem.service.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/state/status.service.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/pure/optimistic-filesystem.service.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/dialog-confirmation.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/stub/stub-files.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/main-file-manager/action-handlers.service.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/utils/sort-helpers.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/main-file-manager/main-file-manager.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/bread-crumbs/crumb-factory.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/bread-crumbs/bread-crumbs.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/actions-toolbars/bulk-actions.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/actions-toolbars/main-actions.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/utils/delayer.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-upload/form-file-firebase/file-icon.helper.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-details/file-details.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/utils/case-helper.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-upload/form-file-firebase/form-base-class.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-upload/form-file-firebase/form-file-firebase.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-upload/form-file-firebase/form-file-uploader-list.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-upload/file-upload.module.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/pure/server-filesystem-request.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/pure/server-filesystem.service.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/base-dialog.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/dialog-permissions-set.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/dialog-my-details.components.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/btns-cancel-ok.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-table-mini/file-table-mini-folder-browser.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-table-mini/actions-mini-browser.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-size/file-size.pipe.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-size/file-size.module.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-table/card-file.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-table/card-folder.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-table/file-table.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-table/file-table.module.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/file-table-mini/file-table-mini.module.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/tags-control/tags-control.component.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/tags-control/tags-control.module.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ui/dialogs/dialogs.module.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/ngx-filemanager-client-firebase.module.ts","../../../projects/ngx-filemanager-client-firebase/src/lib/services/stub/stub-filesystem.class.ts"],"sourcesContent":["import { PlatformLocation } from '@angular/common';\n\nexport function getBaseHref(platformLocation: PlatformLocation): string {\n  return platformLocation.getBaseHrefFromDOM();\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Injectable } from '@angular/core';\n\nexport abstract class Logger {\n  info: any;\n  warn: any;\n  error: any;\n}\n\nexport type logFn = (message?: any, ...optionalParams: any[]) => void;\n\n@Injectable()\nexport class LoggerService implements Logger {\n  info: logFn;\n  warn: logFn;\n  error: logFn;\n}\n","import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormControl } from '@angular/forms';\nimport path from 'path-browserify';\n\nexport interface RenameDialogInterface {\n  currentPath: string;\n}\n\n@Component({\n  template: `\n    <base-dialog\n      [header]=\"headerTemplate\"\n      [body]=\"bodyTemplate\"\n      [actions]=\"actionsTemplate\"\n    >\n      <ng-template #headerTemplate>\n        <h2>Rename Item</h2>\n      </ng-template>\n      <ng-template #bodyTemplate>\n        <h5 class=\"p5 m0\">Old Path: {{ data.currentPath }}</h5>\n        <h5 class=\"p5 m0\">New Path: {{ newPath }}</h5>\n\n        <mat-form-field>\n          <input\n            matInput\n            placeholder=\"New Name\"\n            [formControl]=\"renamedItem\"\n            (keyup.enter)=\"onSubmit()\"\n          />\n        </mat-form-field>\n      </ng-template>\n      <ng-template #actionsTemplate>\n        <btns-cancel-ok\n          okIcon=\"done\"\n          okLabel=\"Rename Item\"\n          (clickedCancel)=\"onCancel()\"\n          (clickedOk)=\"onSubmit()\"\n        >\n        </btns-cancel-ok>\n      </ng-template>\n    </base-dialog>\n  `,\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppDialogRenameComponent {\n  renamedItem = new FormControl();\n\n  constructor(\n    public dialogRef: MatDialogRef<AppDialogRenameComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: RenameDialogInterface\n  ) {\n    const name = path.basename(data.currentPath);\n    this.renamedItem.setValue(name);\n  }\n\n  onSubmit() {\n    const renamedFullPath = this.newPath;\n    this.dialogRef.close(renamedFullPath);\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n\n  get newPath() {\n    const directoryPath = path.dirname(this.data.currentPath);\n    const newItemName = this.renamedItem.value;\n    if (this.IsDir) {\n      return path.join(directoryPath, newItemName, '/');\n    }\n    return path.join(directoryPath, newItemName);\n  }\n  get IsDir() {\n    return this.data.currentPath.endsWith('/');\n  }\n}\n","export function HasPrefixSlash(inputPath: string): boolean {\n  if (!inputPath || !inputPath.length) {\n    return false;\n  }\n  const hasPrefix = inputPath.startsWith('/');\n  return hasPrefix;\n}\n\nexport function TrimSlashes(inputPath: string): string {\n  return inputPath.replace(/^\\/+|\\/+$/g, '');\n}\n\nexport function HasTrailingSlash(inputPath: string): boolean {\n  if (!inputPath || !inputPath.length) {\n    return false;\n  }\n  const hasPrefix = inputPath.endsWith('/');\n  return hasPrefix;\n}\n\nexport function EnsurePrefixSlash(inputPath: string): string {\n  const hasPrefix = HasPrefixSlash(inputPath);\n  const pathParsed = hasPrefix ? inputPath : '/' + inputPath;\n  return pathParsed;\n}\n\nexport function EnsureTrailingSlash(inputPath: string): string {\n  const hasTrailing = HasTrailingSlash(inputPath);\n  const pathParsed = hasTrailing ? inputPath : inputPath + '/';\n  return pathParsed;\n}\n\nexport function EnsureAbsoluteDirectory(inputPath: string): string {\n  const pathParsed = EnsureTrailingSlash(EnsurePrefixSlash(inputPath));\n  return pathParsed;\n}\n\nexport function EnsureNoTrailingSlash(inputPath: string): string {\n  const hasTrailing = HasTrailingSlash(inputPath);\n  const pathParsed = hasTrailing ? inputPath.slice(0, -1) : inputPath;\n  return pathParsed;\n}\n\nexport function Add2ToPath(inputPath: string): string {\n  const dotSegments = inputPath.split('.');\n  const extension = dotSegments.pop();\n  const fileName = dotSegments.join('.') + ' (2)' + '.' + extension;\n  return fileName;\n}\n\nexport function Add2ToPathDir(inputPath: string): string {\n  const pathWithoutSlash = EnsureNoTrailingSlash(inputPath);\n  const pathWith2 = pathWithoutSlash + ' (2)';\n  const newDirName =  EnsureTrailingSlash(pathWith2);\n  return newDirName;\n}\n","import { Component, Inject, OnDestroy } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { CoreTypes } from '../../../core-types';\nimport { LoggerService } from '../../services/logging/logger.service';\nimport path from 'path-browserify';\nimport { Subject, BehaviorSubject, combineLatest } from 'rxjs';\nimport { EnsureTrailingSlash } from '../../utils/path-helpers';\nimport { ActionHandlersService } from '../main-file-manager/action-handlers.service';\nimport { takeUntil, map } from 'rxjs/operators';\nimport { MainActionDefinition } from '../actions-toolbars/MainActionDefinition';\n\nexport interface CopyDialogInterface {\n  files: CoreTypes.ResFile[];\n  isCopy: boolean;\n  actionHandler: ActionHandlersService;\n}\n\n@Component({\n  template: `\n    <base-dialog\n      *ngIf=\"srcDirectory\"\n      [header]=\"headerTemplate\"\n      [body]=\"bodyTemplate\"\n      [actions]=\"actionsTemplate\"\n    >\n      <ng-template #headerTemplate>\n        <h2>{{ OkLabel }} Items</h2>\n      </ng-template>\n      <ng-template #bodyTemplate>\n        <h5 class=\"my-5\">Selected Items</h5>\n        <mat-chip-list class=\"mb-5\">\n          <mat-chip *ngFor=\"let file of items\">\n            <mat-icon *ngIf=\"file.type === 'file'\">description</mat-icon>\n            <mat-icon *ngIf=\"file.type !== 'file'\">folder</mat-icon>\n            {{ file.name }}\n          </mat-chip>\n        </mat-chip-list>\n        <h5 class=\"my-5\">Navigate to destination folder</h5>\n        <div class=\"full-width\">\n          <mat-card class=\"m-10 bg-grey\">\n            <app-file-table-mini-folder-browser\n              [folders]=\"folders\"\n              [mainActions]=\"mainActions\"\n              (enterDirectory)=\"onEnterDirectory($event)\"\n              (selectedDirectory)=\"onSelectedDirectory($event)\"\n            >\n            </app-file-table-mini-folder-browser>\n          </mat-card>\n        </div>\n      </ng-template>\n      <ng-template #actionsTemplate>\n        <h5 class=\"p5 m0\" *ngIf=\"!SelectedFolder\">No folder selected</h5>\n        <h5 class=\"p5 m0\" *ngIf=\"SameAsSrcFolder\">\n          Cannot copy to the same folder\n        </h5>\n        <h5 class=\"p5 m0\" *ngIf=\"!DisableCopy\">\n          Will copy Selected Items to:\n          <strong *ngIf=\"!copyToPathRelative\">/</strong>\n          <strong>{{ copyToPathRelative }}</strong>\n        </h5>\n        <btns-cancel-ok\n          [okIcon]=\"OkIcon\"\n          [okLabel]=\"OkLabel\"\n          [okDisabled]=\"DisableCopy\"\n          (clickedCancel)=\"onCancel()\"\n          (clickedOk)=\"onSubmit()\"\n        >\n        </btns-cancel-ok>\n      </ng-template>\n    </base-dialog>\n  `,\n  styles: [\n    `\n      .bg-grey {\n        background-color: #eee;\n      }\n    `\n  ],\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppDialogCopyComponent implements OnDestroy {\n  copyToPathRelative: string;\n  copyToPath: string;\n  srcDirectory: string;\n  items: CoreTypes.ResFile[];\n  actionHandlers: ActionHandlersService;\n\n  mainActions: MainActionDefinition[];\n  folders: CoreTypes.ResFile[];\n\n  OkLabel: string;\n  OkIcon: string;\n\n  destroyed = new Subject();\n  $copyPathChanged = new BehaviorSubject<string>(null);\n\n  constructor(\n    private logger: LoggerService,\n    public dialogRef: MatDialogRef<AppDialogCopyComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: CopyDialogInterface\n  ) {\n    this.init().catch(e => console.error(e));\n  }\n\n  async init() {\n    this.logger.info('initializing dialog:', { data: this.data });\n    this.items = this.data.files;\n    if (this.data.isCopy) {\n      this.OkLabel = 'Copy';\n      this.OkIcon = 'content_copy';\n    } else {\n      this.OkLabel = 'Move';\n      this.OkIcon = 'forward';\n    }\n    this.actionHandlers = await this.data.actionHandler.CloneProvider();\n    this.mainActions = [\n      {\n        label: 'Home',\n        icon: 'home',\n        onClick: async () => {\n          this.logger.info('Back clicked');\n          const rootPath = this.actionHandlers.GetRootPath();\n          await this.actionHandlers.OnNavigateTo(rootPath);\n          this.onSelectedDirectory(rootPath);\n          return this.onSelectedDirectory(rootPath);\n        },\n        $disabled: combineLatest([\n          this.actionHandlers.$CurrentPathIsRoot,\n          this.$copyPathChanged\n        ]).pipe(\n          map(([isRoot, copyTo]) => {\n            return this.DisableCopy;\n          })\n        )\n      },\n      {\n        label: 'Back',\n        icon: 'reply',\n        onClick: async () => {\n          this.logger.info('Back clicked');\n          await this.actionHandlers.OnNavigateToParent();\n          const selectedDirectory = await this.actionHandlers.GetCurrentPath();\n          return this.onSelectedDirectory(selectedDirectory);\n        },\n        $disabled: this.actionHandlers.$CurrentPathIsRoot\n      },\n      {\n        label: 'New Folder',\n        icon: 'create_new_folder',\n        onClick: async () => this.actionHandlers.OnNewFolderInCurrentDirectory()\n      }\n    ];\n    this.actionHandlers.$FilesWithIcons\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(fileItems => {\n        this.folders = fileItems.filter(f => f.type === 'dir');\n      });\n\n    const firstFile = [...this.items].pop();\n    this.setSrcDirectory(firstFile.fullPath);\n    this.setCopyToPath(this.actionHandlers.GetRootPath());\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n  }\n\n  get SelectedFolder() {\n    return !!this.copyToPath;\n  }\n  get SameAsSrcFolder() {\n    return this.copyToPath === this.srcDirectory;\n  }\n  get DisableCopy() {\n    return !this.SelectedFolder || this.SameAsSrcFolder;\n  }\n\n  private setCopyToPath(inputPath: string) {\n    const dirPath = EnsureTrailingSlash(inputPath);\n    this.copyToPath = dirPath;\n    this.$copyPathChanged.next(dirPath);\n    this.copyToPathRelative = this.actionHandlers.ConvertToRelativePath(\n      dirPath\n    );\n    this.logger.info('setCopyToPath:', {\n      inputPath,\n      copyToPath: this.copyToPath,\n      copyToPathRelative: this.copyToPathRelative\n    });\n  }\n\n  private setSrcDirectory(inputPath: string) {\n    const dirPath = EnsureTrailingSlash(path.dirname(inputPath));\n    this.srcDirectory = dirPath;\n    this.logger.info('setSrcDirectory:', {\n      inputPath,\n      srcDirectory: this.srcDirectory\n    });\n  }\n\n  onEnterDirectory(directoryPath: string) {\n    this.logger.info('onEnterDirectory:', { directoryPath });\n    this.setCopyToPath(directoryPath);\n    return this.actionHandlers.OnNavigateTo(directoryPath);\n  }\n\n  onSelectedDirectory(directoryPath: string) {\n    this.logger.info('onSelectedDirectory:', { directoryPath });\n    this.setCopyToPath(directoryPath);\n  }\n\n  onSubmit() {\n    this.dialogRef.close(this.copyToPath);\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n}\n","import { Component, Inject, OnDestroy } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormControl } from '@angular/forms';\nimport { Observable, Subject, combineLatest } from 'rxjs';\nimport {\n  FileManagerConfig,\n  NameUid,\n} from '../../configuration/client-configuration';\nimport { CoreTypes } from '../../../core-types';\nimport { LoggerService } from '../../services/logging/logger.service';\nimport { map, tap } from 'rxjs/operators';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport { Tag } from '../tags-control/tags-control.component';\n\nexport interface PermissionsObjectDialogInterface {\n  files: CoreTypes.ResFile[];\n  config: FileManagerConfig;\n}\nexport interface PermissionsObjectDialogResponseInterface {\n  permissionsObj: CoreTypes.FilePermissionsObject;\n  files: CoreTypes.ResFile[];\n}\n\n@Component({\n  template: `\n    <base-dialog\n      [header]=\"headerTemplate\"\n      [body]=\"bodyTemplate\"\n      [actions]=\"actionsTemplate\"\n    >\n      <ng-template #headerTemplate>\n        <h2>Set Permissions</h2>\n      </ng-template>\n      <ng-template #bodyTemplate>\n        <h5 class=\"my-5\">Selected Items</h5>\n        <mat-chip-list class=\"mb-5\">\n          <mat-chip *ngFor=\"let file of items\">\n            <mat-icon *ngIf=\"file.type === 'file'\">description</mat-icon>\n            <mat-icon *ngIf=\"file.type !== 'file'\">folder</mat-icon>\n            {{ file.name }}\n          </mat-chip>\n        </mat-chip-list>\n\n        <div class=\"full-width\">\n          <h5 class=\"my-5\">Who can see this</h5>\n          <app-control-tag-multiple\n            class=\"full-width -mt-15\"\n            [control]=\"allReadersControl\"\n            [selectChoices$]=\"$allEntities\"\n            [allowCustom]=\"false\"\n          >\n          </app-control-tag-multiple>\n        </div>\n\n        <div *ngIf=\"config?.showWriters\">\n          <h5 class=\"my-5\">Who can edit this</h5>\n          <app-control-tag-multiple\n            class=\"full-width -mt-15\"\n            [control]=\"allWritersControl\"\n            [selectChoices$]=\"$allEntities\"\n            [allowCustom]=\"false\"\n          >\n          </app-control-tag-multiple>\n        </div>\n\n        <div *ngIf=\"config?.showOthers\">\n          <h5 class=\"my-5\">Everyone else can</h5>\n          <mat-form-field class=\"full-width\">\n            <mat-select matInput [formControl]=\"othersControl\">\n              <mat-option\n                *ngFor=\"let permission of othersOptions\"\n                [value]=\"permission\"\n              >\n                {{ permission }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n        </div>\n      </ng-template>\n\n      <ng-template #actionsTemplate>\n        <btns-cancel-ok\n          okIcon=\"done\"\n          okLabel=\"Set Permissions\"\n          (clickedCancel)=\"onCancel()\"\n          (clickedOk)=\"onSubmit()\"\n        >\n        </btns-cancel-ok>\n      </ng-template>\n    </base-dialog>\n  `,\n  styleUrls: ['../shared-utility-styles.scss'],\n  styles: [\n    `\n      .my-5 {\n        margin: 5px 0;\n      }\n      .mb-5 {\n        margin-bottom: 5px;\n      }\n      .-mt-15 {\n        margin-top: -15px;\n      }\n    `,\n  ],\n})\nexport class AppDialogPermissionsSetObjectComponent implements OnDestroy {\n  items: CoreTypes.ResFile[];\n\n  othersControl = new FormControl();\n  othersOptions: CoreTypes.FilePermissionOthers[] = [\n    'read/write',\n    'read',\n    'hidden',\n  ];\n\n  allReadersControl = new FormControl([]);\n  allWritersControl = new FormControl([]);\n\n  $allEntities: Observable<Tag[]>;\n\n  destroyed = new Subject();\n  config: FileManagerConfig;\n\n  constructor(\n    private logger: LoggerService,\n    public dialogRef: MatDialogRef<AppDialogPermissionsSetObjectComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: PermissionsObjectDialogInterface\n  ) {\n    this.logger.info('Initializing setobject dialog', { data });\n    this.items = data.files;\n    this.config = data.config;\n    const users$ = this.config.users;\n    const groups$ = this.config.groups;\n    this.$allEntities = combineLatest([groups$, users$]).pipe(\n      tap((allEntities) => this.logger.info('allEntities', { allEntities })),\n      map((arr) => {\n        let tempEntities: NameUid[] = [\n          {\n            uid: '',\n            name: 'Groups: ',\n            isDisabled: true,\n          },\n        ];\n        tempEntities = tempEntities.concat(arr[0]);\n        tempEntities.push({\n          uid: '',\n          name: 'Users: ',\n          isDisabled: true,\n        });\n        return tempEntities.concat(arr[1]);\n      }),\n      map((arr) =>\n        arr.map(\n          (n) =>\n            ({\n              id: n.uid,\n              name: n.name,\n              isDisabled: !!n.isDisabled,\n            } as Tag)\n        )\n      )\n    );\n    this.$allEntities.subscribe((allEntities) =>\n      this.logger.info('allEntities', { allEntities })\n    );\n    this.initPermissions(data.files);\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n  }\n\n  initPermissions(files: CoreTypes.ResFile[]) {\n    const allPermissions = files.map((f) => f.permissions);\n    const othersVal = allPermissions\n      .map((p) => p.others)\n      .reduce((acc, curr) => {\n        if (acc === '-') {\n          return curr;\n        }\n        const stillSame = acc === curr;\n        if (stillSame) {\n          return acc;\n        }\n        return null;\n      }, '-');\n    if (othersVal) {\n      this.othersControl.setValue(othersVal);\n    }\n\n    const uniqueWriters = this.getUniqueTags(\n      allPermissions.map((p) => p.writers)\n    );\n    this.allWritersControl.setValue(uniqueWriters);\n\n    const uniqueReaders = this.getUniqueTags(\n      allPermissions.map((p) => p.readers)\n    );\n    this.allReadersControl.setValue(uniqueReaders);\n\n    this.logger.info('set permissions', {\n      othersVal,\n      uniqueWriters,\n      uniqueReaders,\n    });\n  }\n\n  getUniqueTags(inputEntities: string[][]): Tag[] {\n    const allInputEntities = inputEntities.reduce((acc, curr) => {\n      return acc.concat(curr);\n    }, []);\n    const allEntitiesUnique = Array.from(new Set(allInputEntities));\n    return this.strings2Tags(allEntitiesUnique);\n  }\n\n  strings2Tags(inputArr: string[]): Tag[] {\n    return inputArr.map(\n      (val) =>\n        ({\n          id: uuidv4(),\n          name: val,\n        } as Tag)\n    );\n  }\n  tags2Strings(inputArr: Tag[]): string[] {\n    return inputArr.map((val) => val.name);\n  }\n\n  onSubmit() {\n    const newPermissionsObj: CoreTypes.FilePermissionsObject = {\n      others: this.othersControl.value,\n      readers: this.tags2Strings(this.allReadersControl.value),\n      writers: this.tags2Strings(this.allWritersControl.value),\n    };\n    const response: PermissionsObjectDialogResponseInterface = {\n      permissionsObj: newPermissionsObj,\n      files: this.data.files,\n    };\n    this.logger.info('onSubmit', { newPermissionsObj, response });\n    this.dialogRef.close(response);\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Injectable()\nexport class NotificationService {\n  constructor(private matSnackbar: MatSnackBar) {}\n\n  public notify(msg: string, title?: string) {\n    return this.matSnackbar.open(msg, title, {\n      duration: 4000,\n      horizontalPosition: 'center',\n      verticalPosition: 'bottom',\n    });\n  }\n\n  public notifyCancelled() {\n    return this.notify('Cancelled Operation');\n  }\n}\n","import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormControl } from '@angular/forms';\nimport { BehaviorSubject } from 'rxjs';\nimport { LoggerService } from '../../services/logging/logger.service';\nimport { FormFilesConfiguration } from '../file-upload/form-file-firebase/form-file-firebase.component';\nimport { NotificationService } from '../../services/pure/notification.service';\nimport { FormArrayFileObject } from '../file-upload/form-file-firebase/FormArrayFileObject';\n\nexport interface UploadDialogInterface {\n  currentDirectory: string;\n  firebaseConfig: {};\n  bucketName: string;\n}\n\nexport interface UploadDialogResponseInterface {\n  uploaded: string[];\n}\n\n@Component({\n  template: `\n    <base-dialog\n      [header]=\"headerTemplate\"\n      [body]=\"bodyTemplate\"\n      [actions]=\"actionsTemplate\"\n    >\n      <ng-template #headerTemplate>\n        <h2>Upload Files</h2>\n        <h5>To Folder: {{ currentDirectory }}</h5>\n      </ng-template>\n      <ng-template #bodyTemplate>\n        <div style=\"width: 100%;\">\n          <form-file-firebase\n            [formControl]=\"filesControl\"\n            [config]=\"config\"\n            (uploadStatusChanged)=\"isUploading.next($event)\"\n          >\n          </form-file-firebase>\n        </div>\n      </ng-template>\n      <ng-template #actionsTemplate>\n        <btns-cancel-ok\n          okIcon=\"done\"\n          okLabel=\"Finish\"\n          (clickedCancel)=\"onCancel()\"\n          (clickedOk)=\"onSubmit()\"\n          [okDisabled]=\"isUploading | async\"\n        >\n        </btns-cancel-ok>\n      </ng-template>\n    </base-dialog>\n    <div #hidden></div>\n  `,\n  styles: [\n    `\n      .dz-image {\n        display: none;\n      }\n      .dz-details > img {\n        display: none;\n      }\n    `\n  ],\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppDialogUploadFilesComponent {\n  filesControl = new FormControl([]);\n\n  currentDirectory = '';\n\n  config: FormFilesConfiguration;\n  isUploading = new BehaviorSubject<boolean>(true);\n\n  constructor(\n    private logger: LoggerService,\n    private notifications: NotificationService,\n    public dialogRef: MatDialogRef<AppDialogUploadFilesComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: UploadDialogInterface\n  ) {\n    this.config = {\n      directory: data.currentDirectory,\n      bucketname: data.bucketName,\n      firebaseConfig: data.firebaseConfig\n    };\n    this.logger.info('initializing:', {\n      currentDirectory: this.currentDirectory,\n      config: this.config,\n      data: data\n    });\n  }\n\n  onSubmit() {\n    const files = this.filesControl.value as FormArrayFileObject[];\n    const response: UploadDialogResponseInterface = {\n      uploaded: files.map(f => f.value.name)\n    };\n    this.dialogRef.close(response);\n  }\n\n  onCancel() {\n    const response: UploadDialogResponseInterface = {\n      uploaded: []\n    };\n    this.dialogRef.close(response);\n  }\n}\n","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { FormControl } from '@angular/forms';\n\n@Component({\n  template: `\n    <base-dialog\n      [header]=\"headerTemplate\"\n      [body]=\"bodyTemplate\"\n      [actions]=\"actionsTemplate\"\n    >\n      <ng-template #headerTemplate>\n        <h2>Create Folder</h2>\n      </ng-template>\n      <ng-template #bodyTemplate>\n        <div>\n          <mat-form-field>\n            <input\n              matInput\n              placeholder=\"New Folder Name\"\n              [formControl]=\"folderName\"\n              (keyup.enter)=\"onSubmit()\"\n            />\n          </mat-form-field>\n        </div>\n      </ng-template>\n      <ng-template #actionsTemplate>\n        <btns-cancel-ok\n          okIcon=\"done\"\n          okLabel=\"Create Folder\"\n          (clickedCancel)=\"onCancel()\"\n          (clickedOk)=\"onSubmit()\"\n        >\n        </btns-cancel-ok>\n      </ng-template>\n    </base-dialog>\n  `,\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppDialogNewFolderComponent {\n  folderName = new FormControl('New folder');\n\n  constructor(public dialogRef: MatDialogRef<AppDialogNewFolderComponent>) {}\n\n  onSubmit() {\n    this.dialogRef.close(this.folderName.value);\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Logger } from './logger.service';\n\n@Injectable()\nexport class ConsoleLoggerService implements Logger {\n  get info() {\n    const boundLogFn = console.log.bind(console, 'ngx-fm:: ');\n    return boundLogFn;\n  }\n\n  get warn() {\n    const boundLogFn = console.warn.bind(console, 'ngx-fm:: ');\n    return boundLogFn;\n  }\n\n  get error() {\n    const boundLogFn = console.error.bind(console, 'ngx-fm:: ');\n    return boundLogFn;\n  }\n}\n","import { CoreTypes } from '../../../core-types';\nimport { EnsureTrailingSlash } from '../../utils/path-helpers';\nimport { ConsoleLoggerService } from '../logging/console-logger.service';\n\nexport class ClientCache {\n  private logger = new ConsoleLoggerService();\n\n  private cachedFolders: {\n    [folderPath: string]: CoreTypes.ResFile[];\n  } = {};\n  private cacheLimit = 20;\n\n  public GetCached(input: string) {\n    const directoryPath = EnsureTrailingSlash(input);\n    return this.cachedFolders[directoryPath] || [];\n  }\n  public SetCached(input: string, newFolderFiles: CoreTypes.ResFile[]) {\n    const directoryPath = EnsureTrailingSlash(input);\n    const oldFolders = this.GetCached(directoryPath);\n    this.logger.info('SetCached()', {\n      from: oldFolders.length,\n      to: newFolderFiles.length\n    });\n    if (this.cachedCount > this.cacheLimit) {\n      this.removeRandomFolderPath();\n    }\n    this.cachedFolders[directoryPath] = newFolderFiles;\n  }\n\n  private get cachedCount() {\n    return Object.keys(this.cachedFolders).length;\n  }\n  private removeRandomFolderPath() {\n    const randomIndex = Math.floor(Math.random() * this.cachedCount);\n    const randomKey = Object.keys(this.cachedFolders)[randomIndex];\n    delete this.cachedFolders[randomKey];\n  }\n}\n","import { CoreTypes } from '../../../core-types';\nimport { ClientCache } from './client-filesystem.cache';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { EnsurePrefixSlash } from '../../utils/path-helpers';\nimport { ConsoleLoggerService } from '../logging/console-logger.service';\n\nexport class ClientFileSystemDataStore {\n  private cache = new ClientCache();\n\n  private _$currentFiles = new BehaviorSubject<CoreTypes.ResFile[]>([]);\n  private _$currentPath = new BehaviorSubject<string>(null);\n  private _$selectedFile = new BehaviorSubject<CoreTypes.ResFile>(null);\n\n  private logger = new ConsoleLoggerService();\n\n  public SetCache(cache: ClientCache) {\n    this.cache = cache;\n  }\n\n  public get $currentFiles(): Observable<CoreTypes.ResFile[]> {\n    return this._$currentFiles;\n  }\n  public get $currentPath(): Observable<string> {\n    return this._$currentPath;\n  }\n  public get $selectedFile(): Observable<CoreTypes.ResFile> {\n    return this._$selectedFile;\n  }\n\n  public CurrentPath() {\n    return this._$currentPath.value;\n  }\n  public CurrentFiles() {\n    return this._$currentFiles.value;\n  }\n  public GetCached(directoryPath: string) {\n    return this.cache.GetCached(directoryPath);\n  }\n  public SetDirectoryFiles(files: CoreTypes.ResFile[], directoryPath: string) {\n    this.cache.SetCached(directoryPath, files);\n  }\n  public SetPath(path: string) {\n    const pathParsed = EnsurePrefixSlash(path);\n    this.logger.info('datastore.SetPath', { path, pathParsed });\n    const cachedFiles = this.cache.GetCached(pathParsed);\n    this._$currentPath.next(pathParsed);\n    this._$currentFiles.next(cachedFiles);\n  }\n  SelectFile(item: CoreTypes.ResFile) {\n    this._$selectedFile.next(item);\n  }\n  exists(fullPath: string, cwd: string): boolean {\n    const filesInDir = this.cache.GetCached(cwd);\n    const exists = filesInDir.find(f => f.fullPath === fullPath);\n    return !!exists;\n  }\n\n  CloneStore(): ClientFileSystemDataStore {\n    const newStore = new ClientFileSystemDataStore();\n    newStore.SetPath(this.CurrentPath());\n    newStore.SetDirectoryFiles(\n      this._$currentFiles.getValue(),\n      this.CurrentPath()\n    );\n    newStore.SetCache(this.cache);\n    return newStore;\n  }\n}\n","export interface FileIcon {\n  /**\n   * Name of the icon, e.g. 'javascript'\n   */\n  name: string;\n\n  /**\n   * Define the file extensions that should use this icon.\n   * E.g. ['js']\n   */\n  fileExtensions?: string[];\n\n  /**\n   * Define if there are some static file names that should apply this icon.\n   * E.g. ['sample.js']\n   */\n  fileNames?: string[];\n\n  /**\n   * Define if there is a light icon available.\n   */\n  light?: boolean;\n\n  /**\n   * Define if there is a high contrast icon available.\n   */\n  highContrast?: boolean;\n\n  /**\n   * Define if the icon should be disabled.\n   */\n  disabled?: boolean;\n}\n\nexport interface FolderTheme {\n  /**\n   * Name of the theme\n   */\n  name: string;\n\n  /**\n   * Define the default icon for folders in a theme.\n   */\n  defaultIcon: DefaultIcon;\n\n  /**\n   * Icon for root folders.\n   */\n  rootFolder?: DefaultIcon;\n\n  /**\n   * Defines folder icons for specific folder names.\n   */\n  icons?: FolderIcon[];\n}\n\nexport interface FolderIcon {\n  /**\n   * Name of the icon, e.g. 'src'\n   */\n  name: string;\n\n  /**\n   * Define the folder names that should apply the icon.\n   * E.g. ['src', 'source']\n   */\n  folderNames: string[];\n\n  /**\n   * Define if there is a light icon available.\n   */\n  light?: boolean;\n\n  /**\n   * Define if there is a high contrast icon available.\n   */\n  highContrast?: boolean;\n\n  /**\n   * Define if the icon should be disabled.\n   */\n  disabled?: boolean;\n}\n\nexport interface DefaultIcon {\n  /**\n   * Name of the icon, e.g. 'src'\n   */\n  name: string;\n\n  /**\n   * Define if there is a light icon available.\n   */\n  light?: boolean;\n\n  /**\n   * Define if there is a high contrast icon available.\n   */\n  highContrast?: boolean;\n}\n\nexport class FileIcons {\n  /**\n   * Define the default icon for files.\n   */\n  defaultIcon: DefaultIcon;\n\n  /**\n   * Defines all folder icons.\n   */\n  icons?: FileIcon[];\n}\n\nexport const fileIcons: FileIcons = {\n  defaultIcon: { name: 'file' },\n  icons: [\n    { name: 'word', fileExtensions: ['doc', 'docx', 'rtf'] },\n    { name: 'pdf', fileExtensions: ['pdf'] },\n    { name: 'table', fileExtensions: ['xlsx', 'xls', 'csv', 'tsv'] },\n    {\n      name: 'html',\n      fileExtensions: ['html', 'htm', 'xhtml', 'html_vm', 'asp']\n    },\n    {\n      name: 'markdown',\n      fileExtensions: ['md', 'markdown', 'rst']\n    },\n    { name: 'yaml', fileExtensions: ['yaml', 'YAML-tmLanguage', 'yml'] },\n    {\n      name: 'xml',\n      fileExtensions: [\n        'xml',\n        'plist',\n        'xsd',\n        'dtd',\n        'xsl',\n        'xslt',\n        'resx',\n        'iml',\n        'xquery',\n        'tmLanguage',\n        'manifest',\n        'project'\n      ],\n      fileNames: ['.htaccess']\n    },\n    {\n      name: 'image',\n      fileExtensions: [\n        'png',\n        'jpeg',\n        'jpg',\n        'gif',\n        'svg',\n        'ico',\n        'tif',\n        'tiff',\n        'psd',\n        'psb',\n        'ami',\n        'apx',\n        'bmp',\n        'bpg',\n        'brk',\n        'cur',\n        'dds',\n        'dng',\n        'exr',\n        'fpx',\n        'gbr',\n        'img',\n        'jbig2',\n        'jb2',\n        'jng',\n        'jxr',\n        'pbm',\n        'pgf',\n        'pic',\n        'raw',\n        'webp',\n        'eps'\n      ]\n    },\n    { name: 'tex', fileExtensions: ['tex', 'cls', 'sty'] },\n    {\n      name: 'powerpoint',\n      fileExtensions: [\n        'pptx',\n        'ppt',\n        'pptm',\n        'potx',\n        'potm',\n        'ppsx',\n        'ppsm',\n        'pps',\n        'ppam',\n        'ppa'\n      ]\n    },\n    {\n      name: 'video',\n      fileExtensions: [\n        'webm',\n        'mkv',\n        'flv',\n        'vob',\n        'ogv',\n        'ogg',\n        'gifv',\n        'avi',\n        'mov',\n        'qt',\n        'wmv',\n        'yuv',\n        'rm',\n        'rmvb',\n        'mp4',\n        'm4v',\n        'mpg',\n        'mp2',\n        'mpeg',\n        'mpe',\n        'mpv',\n        'm2v'\n      ]\n    },\n    { name: 'audio', fileExtensions: ['mp3', 'flac', 'm4a', 'wma', 'aiff'] },\n    { name: 'document', fileExtensions: ['txt'] }\n  ]\n};\n\nconst folderIcons: FolderTheme[] = [\n  {\n    name: 'specific',\n    defaultIcon: { name: 'folder-aws' },\n    rootFolder: { name: 'folder-root' },\n    icons: [\n      { name: 'folder-src', folderNames: ['src', 'source', 'sources'] },\n      { name: 'folder-dist', folderNames: ['dist', 'out', 'build', 'release'] },\n      {\n        name: 'folder-css',\n        folderNames: ['css', 'stylesheet', 'stylesheets', 'style', 'styles']\n      },\n      { name: 'folder-sass', folderNames: ['sass', '_sass', 'scss', '_scss'] },\n      {\n        name: 'folder-images',\n        folderNames: [\n          'images',\n          'image',\n          'img',\n          'icons',\n          'icon',\n          'ico',\n          'screenshot',\n          'screenshots'\n        ]\n      },\n      { name: 'folder-scripts', folderNames: ['script', 'scripts'] },\n      { name: 'folder-node', folderNames: ['node_modules'] },\n      {\n        name: 'folder-javascript',\n        folderNames: ['js', 'javascript', 'javascripts']\n      },\n      { name: 'folder-font', folderNames: ['font', 'fonts'] },\n      { name: 'folder-bower', folderNames: ['bower_components'] },\n      {\n        name: 'folder-test',\n        folderNames: [\n          'test',\n          'tests',\n          'testing',\n          '__tests__',\n          '__snapshots__',\n          '__mocks__',\n          '__test__',\n          'spec',\n          'specs'\n        ]\n      },\n      {\n        name: 'folder-jinja',\n        folderNames: ['jinja', 'jinja2', 'j2'],\n        light: true\n      },\n      { name: 'folder-markdown', folderNames: ['markdown', 'md'] },\n      { name: 'folder-php', folderNames: ['php'] },\n      { name: 'folder-phpmailer', folderNames: ['phpmailer'] },\n      { name: 'folder-sublime', folderNames: ['sublime'] },\n      {\n        name: 'folder-docs',\n        folderNames: ['doc', 'docs', 'documents', 'documentation']\n      },\n      {\n        name: 'folder-git',\n        folderNames: ['.git', 'submodules', '.submodules']\n      },\n      { name: 'folder-github', folderNames: ['.github'] },\n      { name: 'folder-gitlab', folderNames: ['.gitlab'] },\n      { name: 'folder-vscode', folderNames: ['.vscode', '.vscode-test'] },\n      {\n        name: 'folder-views',\n        folderNames: [\n          'view',\n          'views',\n          'screen',\n          'screens',\n          'page',\n          'pages',\n          'html'\n        ]\n      },\n      { name: 'folder-vue', folderNames: ['vue'] },\n      { name: 'folder-expo', folderNames: ['.expo'] },\n      {\n        name: 'folder-config',\n        folderNames: [\n          'config',\n          'configs',\n          'configuration',\n          'configurations',\n          'settings',\n          'META-INF'\n        ]\n      },\n      {\n        name: 'folder-i18n',\n        folderNames: [\n          'i18n',\n          'internationalization',\n          'lang',\n          'language',\n          'languages',\n          'locale',\n          'locales',\n          'localization',\n          'translation',\n          'translations'\n        ]\n      },\n      { name: 'folder-components', folderNames: ['components'] },\n      { name: 'folder-aurelia', folderNames: ['aurelia_project'] },\n      {\n        name: 'folder-resource',\n        folderNames: [\n          'resource',\n          'resources',\n          'res',\n          'asset',\n          'assets',\n          'static'\n        ]\n      },\n      {\n        name: 'folder-lib',\n        folderNames: ['lib', 'libs', 'library', 'libraries']\n      },\n      {\n        name: 'folder-theme',\n        folderNames: ['themes', 'theme', 'color', 'colors', 'design', 'designs']\n      },\n      { name: 'folder-webpack', folderNames: ['webpack'] },\n      { name: 'folder-global', folderNames: ['global'] },\n      { name: 'folder-public', folderNames: ['public', 'wwwroot'] },\n      {\n        name: 'folder-include',\n        folderNames: ['include', 'includes', '_includes']\n      },\n      { name: 'folder-docker', folderNames: ['docker', '.docker'] },\n      { name: 'folder-ngrx-effects', folderNames: ['effects'] },\n      { name: 'folder-ngrx-state', folderNames: ['states', 'state'] },\n      { name: 'folder-ngrx-reducer', folderNames: ['reducers', 'reducer'] },\n      { name: 'folder-ngrx-actions', folderNames: ['actions'] },\n      { name: 'folder-ngrx-entities', folderNames: ['entities'] },\n      { name: 'folder-redux-reducer', folderNames: ['reducers', 'reducer'] },\n      { name: 'folder-redux-actions', folderNames: ['actions'] },\n      { name: 'folder-redux-store', folderNames: ['store'] },\n      { name: 'folder-react-components', folderNames: ['components'] },\n      {\n        name: 'folder-database',\n        folderNames: ['db', 'database', 'sql', 'data', '_data']\n      },\n      { name: 'folder-log', folderNames: ['log', 'logs'] },\n      {\n        name: 'folder-temp',\n        folderNames: [\n          'temp',\n          '.temp',\n          'tmp',\n          '.tmp',\n          'cached',\n          'cache',\n          '.cache'\n        ]\n      },\n      { name: 'folder-aws', folderNames: ['aws', '.aws'] },\n      { name: 'folder-audio', folderNames: ['audio', 'audios', 'music'] },\n      {\n        name: 'folder-video',\n        folderNames: ['video', 'videos', 'movie', 'movies']\n      },\n      { name: 'folder-kubernetes', folderNames: ['kubernetes', 'k8s'] },\n      { name: 'folder-import', folderNames: ['import', 'imports', 'imported'] },\n      { name: 'folder-export', folderNames: ['export', 'exports', 'exported'] },\n      { name: 'folder-wakatime', folderNames: ['wakatime'] },\n      { name: 'folder-circleci', folderNames: ['.circleci'] },\n      { name: 'folder-wordpress', folderNames: ['wp-content'] },\n      { name: 'folder-gradle', folderNames: ['gradle', '.gradle'] },\n      { name: 'folder-coverage', folderNames: ['coverage', '.nyc-output'] },\n      {\n        name: 'folder-class',\n        folderNames: ['class', 'classes', 'model', 'models']\n      },\n      {\n        name: 'folder-other',\n        folderNames: ['other', 'others', 'misc', 'miscellaneous']\n      },\n      { name: 'folder-typescript', folderNames: ['typescript', 'ts'] },\n      { name: 'folder-routes', folderNames: ['routes'] },\n      { name: 'folder-ci', folderNames: ['.ci', 'ci'] },\n      {\n        name: 'folder-benchmark',\n        folderNames: [\n          'benchmark',\n          'benchmarks',\n          'performance',\n          'measure',\n          'measures',\n          'measurement'\n        ]\n      },\n      {\n        name: 'folder-messages',\n        folderNames: [\n          'messages',\n          'forum',\n          'chat',\n          'chats',\n          'conversation',\n          'conversations'\n        ]\n      },\n      { name: 'folder-less', folderNames: ['less'] },\n      { name: 'folder-python', folderNames: ['python', '__pycache__'] },\n      { name: 'folder-debug', folderNames: ['debug', 'debugging'] },\n      { name: 'folder-fastlane', folderNames: ['fastlane'] },\n      {\n        name: 'folder-plugin',\n        folderNames: [\n          'plugin',\n          'plugins',\n          '_plugins',\n          'extension',\n          'extensions',\n          'addon',\n          'addons'\n        ]\n      },\n      {\n        name: 'folder-controller',\n        folderNames: ['controller', 'controllers', 'service', 'services']\n      },\n      { name: 'folder-ansible', folderNames: ['ansible'] },\n      { name: 'folder-server', folderNames: ['server', 'servers', 'backend'] },\n      { name: 'folder-client', folderNames: ['client', 'clients', 'frontend'] },\n      { name: 'folder-tasks', folderNames: ['tasks', 'tickets'] },\n      { name: 'folder-android', folderNames: ['android'] },\n      { name: 'folder-ios', folderNames: ['ios'] },\n      { name: 'folder-upload', folderNames: ['uploads', 'upload'] },\n      { name: 'folder-download', folderNames: ['downloads', 'download'] },\n      { name: 'folder-tools', folderNames: ['tools'] },\n      { name: 'folder-helper', folderNames: ['helpers', 'helper'] }\n    ]\n  },\n  {\n    name: 'classic',\n    defaultIcon: { name: 'folder' },\n    rootFolder: { name: 'folder-root' }\n  },\n  { name: 'none', defaultIcon: { name: '' } }\n];\n\nconst getFileIconName = (input: string) => {\n  if (!input || !input.includes('.')) {\n    return fileIcons.defaultIcon.name;\n  }\n  const filename = input.toLowerCase();\n  const ext = getFileExtension(filename);\n\n  const matchesExt = fileIcons.icons.filter(\n    x => !!x.fileExtensions && !!x.fileExtensions.filter(y => y === ext).length\n  );\n  const matchesFilename = fileIcons.icons.filter(\n    x => !!x.fileNames && !!x.fileNames.filter(y => y === filename).length\n  );\n  if (!!matchesFilename.length) {\n    return matchesFilename[0].name;\n  } else if (!!matchesExt.length) {\n    return matchesExt[0].name;\n  }\n\n  return fileIcons.defaultIcon.name;\n};\n\nconst isFileImage = (filename: string) => getFileIconName(filename) === 'image';\n\nconst getFileExtension = (filename: string) => filename.split('.').pop();\n\nconst getFileName = (filename: string) => {\n  const slashSegments = filename.split('/');\n  const filenameWithExt = slashSegments.pop();\n  const dotSegments = filenameWithExt.split('.');\n  if (dotSegments.length < 2) {\n    return filenameWithExt;\n  }\n  dotSegments.pop();\n  return dotSegments.join('.');\n};\n\nconst getFolderIconName = (filename: string) => {\n  return 'folder-other';\n  filename = filename.toLowerCase();\n  const matches = folderIcons[0].icons.filter(\n    x => !!x.folderNames && !!x.folderNames.filter(y => y === filename).length\n  );\n  if (!!matches.length) {\n    return matches[0].name;\n  }\n\n  return folderIcons[0].defaultIcon.name;\n};\n\nexport const guesser = {\n  isFileImage,\n  getFileExtension,\n  getFileName,\n  getFolderIconName,\n  getFileIconName,\n};\n","import { guesser } from '../../utils/file-icon-guesser';\nimport { Injectable, Inject } from '@angular/core';\nimport { APP_BASE_HREF } from '@angular/common';\nimport path from 'path-browserify';\n\n@Injectable()\nexport class IconUrlResolverService {\n  iconAssetDirectory = '/assets/fileicons/';\n  constructor(@Inject(APP_BASE_HREF) private baseHref: string) {}\n\n  getFileIconUrl(filename: string) {\n    return path.join(\n      this.baseHref,\n      this.iconAssetDirectory,\n      guesser.getFileIconName(filename) + '.svg'\n    );\n  }\n  getFolderIconUrl(filename: string) {\n    return path.join(\n      this.baseHref,\n      this.iconAssetDirectory,\n      guesser.getFolderIconName(filename) + '.svg'\n    );\n  }\n}\n","import { CoreTypes } from '../../core-types';\nimport path from 'path-browserify';\n\n// temporary directory for the client while it refreshes\nexport function MakeClientDirectory(\n  name: string,\n  fullPath: string\n): CoreTypes.ResFile {\n  return {\n    name: name,\n    fullPath: fullPath,\n    rightsFirebase: [],\n    permissions: {} as any,\n    size: null,\n    date: new Date().toISOString(),\n    type: 'dir'\n  };\n}\n\nexport function MakeClientFile(\n  fullPath: string\n): CoreTypes.ResFile {\n  const fileName = path.basename(fullPath);\n  return {\n    name: fileName,\n    fullPath: fullPath,\n    rightsFirebase: [],\n    permissions: {} as any,\n    size: null,\n    date: new Date().toISOString(),\n    type: 'file'\n  };\n}\n","import { map, filter, take } from 'rxjs/operators';\nimport { Injectable, OnDestroy } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport * as path from 'path-browserify';\nimport { CoreTypes } from '../../../core-types';\nimport {\n  Add2ToPathDir,\n  EnsureTrailingSlash,\n  EnsureNoTrailingSlash,\n  Add2ToPath\n} from '../../utils/path-helpers';\nimport { LoggerService } from '../logging/logger.service';\nimport { ClientFileSystem } from './client-filesystem.interface';\nimport { ClientFileSystemDataStore } from '../state/client-filesystem.datastore';\nimport { IconUrlResolverService } from './icon-url-resolver.service';\nimport { MakeClientDirectory, MakeClientFile } from '../../utils/file.factory';\n\n// tslint:disable:member-ordering\n@Injectable()\nexport class ClientFileSystemService implements ClientFileSystem, OnDestroy {\n  private store = new ClientFileSystemDataStore();\n\n  get $currentFiles() {\n    return this.store.$currentFiles;\n  }\n  get $currentPath() {\n    return this.store.$currentPath;\n  }\n  get $selectedFile() {\n    return this.store.$selectedFile;\n  }\n\n  private static instanceCount = 0;\n  private instanceCountIncr() {\n    ClientFileSystemService.instanceCount++;\n    this.logger.info('new instance created', { instances: this.instances });\n  }\n  private instanceCountDecr() {\n    ClientFileSystemService.instanceCount--;\n    this.logger.info('instance destroyed', { instances: this.instances });\n  }\n  get instances() {\n    return ClientFileSystemService.instanceCount;\n  }\n\n  constructor(\n    private logger: LoggerService,\n    private iconResolver: IconUrlResolverService\n  ) {\n    this.instanceCountIncr();\n  }\n\n  ngOnDestroy() {\n    this.instanceCountDecr();\n  }\n\n  public SetStore(store: ClientFileSystemDataStore) {\n    this.store = store;\n  }\n\n  async OnList(folderPath: string): Promise<void> {\n    this.logger.info('client.OnList', { folderPath });\n    this.store.SetPath(folderPath);\n  }\n  async OnCreateFolder(\n    newPath: string,\n    disableNoClobber?: boolean\n  ): Promise<void> {\n    const cwd = path.dirname(newPath);\n    const cachedFiles = this.store.GetCached(cwd);\n    const newDirPathNoClobber = this.getNextFreeFoldernameRecursively(\n      newPath,\n      cwd\n    );\n    const folderName = path.basename(newDirPathNoClobber);\n    const newFolder = MakeClientDirectory(folderName, newDirPathNoClobber);\n    cachedFiles.unshift(newFolder);\n    this.store.SetDirectoryFiles(cachedFiles, cwd);\n    this.store.SetPath(cwd);\n  }\n  async OnUploadedFiles(uploadedFiles: string[]) {\n    if (!Array.isArray(uploadedFiles) || !uploadedFiles.length) {\n      return;\n    }\n    const cwd = this.store.CurrentPath();\n    uploadedFiles.map(f => this.recursivelyTryAddFile(cwd, f));\n  }\n  private recursivelyTryAddFile(cwd: string, newFilePath: string) {\n    const filePath = EnsureNoTrailingSlash(newFilePath);\n    const exists = this.store.exists(filePath, cwd);\n    if (!exists) {\n      const newFile = MakeClientFile(newFilePath);\n      const oldFiles = this.store.GetCached(cwd);\n      const newFiles = [...oldFiles, newFile];\n      this.store.SetDirectoryFiles(newFiles, cwd);\n      return;\n    }\n    const filePathWith2 = Add2ToPath(filePath);\n    return this.recursivelyTryAddFile(cwd, filePathWith2);\n  }\n  async OnCopy(singleFileName: string, newPath: string): Promise<void> {}\n  async OnMove(item: string, newPath: string): Promise<void> {\n    return this.removeSingleFromList(item);\n  }\n  async OnRename(item: string, newItemPath: string): Promise<void> {}\n  async OnEdit(item: string, content: string): Promise<void> {}\n  async OnGetcontent(item: string): Promise<void> {}\n  async OnSetPermissions(\n    item: string,\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity,\n    recursive?: boolean\n  ): Promise<void> {}\n  async OnMoveMultiple(items: string[], newPath: string): Promise<void> {\n    return this.removeMultiple(items);\n  }\n  async OnCopyMultiple(items: string[], newPath: string): Promise<void> {}\n  async OnSetPermissionsMultiple(\n    items: string[],\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity,\n    recursive?: boolean\n  ): Promise<void> {}\n  async OnSetPermissionsObjectMultiple(\n    items: string[],\n    permissionsObj: CoreTypes.FilePermissionsObject,\n    recursive?: boolean\n  ): Promise<void> {\n    const currentFile = await this.$selectedFile.pipe(take(1)).toPromise();\n    if (items.includes(currentFile.fullPath)) {\n      currentFile.permissions = permissionsObj;\n      this.store.SelectFile(currentFile);\n    }\n  }\n  async OnRemove(items: string[]): Promise<void> {\n    return this.removeMultiple(items);\n  }\n  async UpdateList(\n    res: CoreTypes.ResBodyList,\n    directoryPath: string\n  ): Promise<void> {\n    this.store.SetDirectoryFiles(res.result, directoryPath);\n  }\n\n  public getNextFreeFoldernameRecursively(\n    inputDir: string,\n    cwd: string\n  ): string {\n    const folderPath = EnsureTrailingSlash(inputDir);\n    const exists = this.store.exists(folderPath, cwd);\n    if (!exists) {\n      return inputDir;\n    }\n    const nextPath = Add2ToPathDir(folderPath);\n    return this.getNextFreeFoldernameRecursively(nextPath, cwd);\n  }\n\n  private async removeSingleFromList(filePath: string) {\n    const directoryPath = path.dirname(filePath);\n    const currentFiles = this.store.GetCached(filePath);\n    const itemName = this.GetFileNameFromPath(filePath);\n    const cachedFilesWithout = currentFiles.filter(f => f.name !== itemName);\n    this.store.SetDirectoryFiles(cachedFilesWithout, directoryPath);\n  }\n\n  private EnsureNoTrailingSlash(inputPath: string): string {\n    const hasTrailing = inputPath.slice(-1) === '/';\n    const pathParsed = hasTrailing ? inputPath.slice(0, -1) : inputPath;\n    return pathParsed;\n  }\n\n  private GetFileNameFromPath(inputPath: string): string {\n    const safePath = inputPath || '';\n    const parsedPath = this.EnsureNoTrailingSlash(safePath);\n    const basename = parsedPath.split('/').pop();\n    return basename;\n  }\n\n  private async removeMultiple(filePaths: string[]) {\n    const firstPath = filePaths[0];\n    if (!firstPath) {\n      return;\n    }\n    const directoryPath = path.dirname(firstPath);\n    const removeSet = new Set(\n      filePaths.map(filePath => path.basename(filePath))\n    );\n    const currentFiles = this.store.GetCached(directoryPath);\n    const cachedFilesWithout = currentFiles.filter(f => !removeSet.has(f.name));\n    this.store.SetDirectoryFiles(cachedFilesWithout, directoryPath);\n    this.store.SetPath(directoryPath);\n  }\n\n  public get $FilesWithIcons(): Observable<CoreTypes.ResFile[]> {\n    return this.$currentFiles.pipe(\n      map(files => (files ? files : [])),\n      map(files => files.map(file => this.addIconPath(file))),\n      map(files =>\n        files.map(file => {\n          return { ...file };\n        })\n      )\n    );\n  }\n\n  public get $NoParentFolder() {\n    return this.$currentPath.pipe(\n      filter(p => !!p),\n      map(p => p.split('/').length < 2)\n    );\n  }\n\n  public onSelectItem(item: CoreTypes.ResFile): any {\n    this.store.SelectFile(item);\n  }\n\n  public CurrentFiles() {\n    return this.store.CurrentFiles();\n  }\n\n  private addIconPath(file: CoreTypes.ResFile) {\n    if (file.type === 'file') {\n      file['icon'] = this.iconResolver.getFileIconUrl(file.name);\n    } else {\n      file['icon'] = this.iconResolver.getFolderIconUrl(file.name);\n    }\n    return file;\n  }\n\n  CloneProvider(): ClientFileSystemService {\n    const newClone = new ClientFileSystemService(\n      this.logger,\n      this.iconResolver\n    );\n    const newStore = this.store.CloneStore();\n    newClone.SetStore(newStore);\n    return newClone;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FilemanagerStatusService {\n  private _ActiveRequestsMap = new BehaviorSubject<ActiveRequestsMap>({});\n  get ActiveRequestsMap(): Observable<ActiveRequestsMap> {\n    return this._ActiveRequestsMap;\n  }\n\n  public UpdateStatus(key: string, status: RequestStatus, error?: string) {\n    console.log('UpdateStatus()', { key, status, error });\n    let currentValue: ActiveRequestsMap;\n    currentValue = this._ActiveRequestsMap.value;\n    if (!currentValue[key]) {\n      currentValue[key] = {};\n    }\n    currentValue[key].status = status;\n    currentValue[key].error = error;\n    this._ActiveRequestsMap.next(currentValue);\n  }\n}\n\nexport interface ActiveRequestsMap {\n  [key: string]: {\n    status?: RequestStatus;\n    error?: string;\n  };\n}\n\nexport type RequestStatus = 'SENDING' | 'SUCCESS' | 'FAILED';\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { OptimisticFilesystem } from './optimistic-filesystem.interface';\nimport { ClientFileSystemService } from './client-filesystem.service';\nimport { take, takeUntil, tap, auditTime } from 'rxjs/operators';\nimport { LoggerService } from '../logging/logger.service';\nimport path from 'path-browserify';\nimport { NotificationService } from './notification.service';\nimport { Subject } from 'rxjs';\nimport { CoreTypes, FileSystemProvider } from '../../../core-types';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport { FilemanagerStatusService } from '../state/status.service';\n\n// tslint:disable:member-ordering\n\n@Injectable()\nexport class OptimisticFilesystemService\n  implements OptimisticFilesystem, OnDestroy {\n  private serverFilesystem: FileSystemProvider;\n  private clientFilesystem: ClientFileSystemService;\n\n  private static instanceCount = 0;\n  private instanceCountIncr() {\n    OptimisticFilesystemService.instanceCount++;\n    this.logger.info('new instance created', { instances: this.instances });\n  }\n  private instanceCountDecr() {\n    OptimisticFilesystemService.instanceCount--;\n    this.logger.info('instance destroyed', { instances: this.instances });\n  }\n  get instances() {\n    return OptimisticFilesystemService.instanceCount;\n  }\n\n  constructor(\n    private logger: LoggerService,\n    private notifications: NotificationService,\n    private status: FilemanagerStatusService\n  ) {\n    this.instanceCountIncr();\n  }\n\n  ngOnDestroy() {\n    this.instanceCountDecr();\n  }\n\n  get $CurrentPath() {\n    return this.clientFilesystem.$currentPath;\n  }\n\n  get $SelectedFile() {\n    return this.clientFilesystem.$selectedFile;\n  }\n\n  get $FilesWithIcons() {\n    return this.clientFilesystem.$FilesWithIcons;\n  }\n\n  private refreshEmitter = new Subject<string>();\n  private destroyed = new Subject();\n\n  initialize(\n    serverFilesystem: FileSystemProvider,\n    clientFilesystem: ClientFileSystemService\n  ) {\n    this.logger.info('initializing...', { serverFilesystem, clientFilesystem });\n    this.serverFilesystem = serverFilesystem;\n    this.clientFilesystem = clientFilesystem;\n\n    this.destroyed.next();\n    this.refreshEmitter\n      .pipe(\n        takeUntil(this.destroyed),\n        auditTime(800),\n        tap(async currentPath => {\n          return this.clientFilesystem.OnList(currentPath);\n        })\n      )\n      .subscribe(async currentPath => {\n        return this.updateListFromServer(currentPath);\n      });\n  }\n\n  private reportError(error: Error, msg: string, title: string) {\n    this.logger.error('optimistic-filesystem:', { error, title, msg });\n    this.notifications.notify(error.message, title);\n  }\n\n  private async updateListFromServer(directoryPath: string) {\n    try {\n      this.status.UpdateStatus(directoryPath, 'SENDING');\n      this.logger.info('updateListFromServer', { directoryPath });\n      const apiResult = await this.serverFilesystem.List(directoryPath);\n      await this.clientFilesystem.UpdateList(apiResult, directoryPath);\n      const currentDirectory = await this.$CurrentPath\n        .pipe(take(1))\n        .toPromise();\n      if (currentDirectory === directoryPath) {\n        await Promise.all([\n          this.clientFilesystem.OnList(directoryPath),\n          this.selectFirstInCurrentDirectory()\n        ]);\n      }\n      this.status.UpdateStatus(directoryPath, 'SUCCESS');\n    } catch (error) {\n      this.reportError(error, 'Cannot get directory list', 'List Error');\n      this.status.UpdateStatus(directoryPath, 'FAILED', error);\n    }\n  }\n\n  async HandleList(directoryPath: string): Promise<any> {\n    this.refreshEmitter.next(directoryPath);\n  }\n  async HandleCreateFolder(\n    newPath: string,\n    disableNoClobber?: boolean\n  ): Promise<any> {\n    try {\n      this.status.UpdateStatus(newPath, 'SENDING');\n      this.logger.info('HandleCreateFolder', { newPath });\n      await Promise.all([\n        this.clientFilesystem.OnCreateFolder(newPath, disableNoClobber),\n        this.serverFilesystem.CreateFolder(newPath, disableNoClobber)\n      ]);\n      this.status.UpdateStatus(newPath, 'SUCCESS');\n    } catch (error) {\n      this.reportError(error, 'Cannot create folder', 'Create Folder Error');\n      this.status.UpdateStatus(newPath, 'FAILED', error);\n      await this.clientFilesystem.OnRemove([newPath]);\n    }\n  }\n  async HandleUpload(uploadedFiles: string[]): Promise<any> {\n    this.status.UpdateStatus('HandleUpload', 'SENDING');\n    this.logger.info('HandleUpload', { uploadedFiles });\n    const uploadAllPromise = uploadedFiles.map(f => this.serverFilesystem.Upload(f));\n    const blankPermissionsObj: CoreTypes.FilePermissionsObject = {\n      others: 'read/write',\n      readers: [],\n      writers: []\n    };\n    await Promise.all([\n      this.serverFilesystem.SetPermissionsObjectMultiple(uploadedFiles, blankPermissionsObj, true),\n      this.clientFilesystem.OnUploadedFiles(uploadedFiles),\n      uploadAllPromise\n    ]);\n    this.status.UpdateStatus('HandleUpload', 'SUCCESS');\n  }\n  async HandleCopy(singleFileName: string, newPath: string): Promise<any> {\n    try {\n      this.status.UpdateStatus('HandleCopy' + singleFileName, 'SENDING');\n      this.logger.info('HandleCopy', { singleFileName, newPath });\n      await Promise.all([\n        this.clientFilesystem.OnCopy(singleFileName, newPath),\n        this.serverFilesystem.Copy(singleFileName, newPath)\n      ]);\n      this.status.UpdateStatus('HandleCopy' + singleFileName, 'SUCCESS');\n    } catch (error) {\n      this.reportError(error, 'Cannot copy item', 'Copy Error');\n      this.status.UpdateStatus('HandleCopy' + singleFileName, 'FAILED', error);\n      return this.clientFilesystem.OnRemove([newPath]);\n    }\n  }\n  async HandleMove(item: string, newPath: string): Promise<any> {\n    try {\n      this.status.UpdateStatus('HandleMove' + item, 'SENDING');\n      this.logger.info('HandleMove', { item, newPath });\n      await Promise.all([\n        this.clientFilesystem.OnMove(item, newPath),\n        this.serverFilesystem.Move(item, newPath)\n      ]);\n      this.status.UpdateStatus('HandleMove' + item, 'SUCCESS');\n    } catch (error) {\n      this.reportError(error, 'Cannot move item', 'Move Error');\n      this.status.UpdateStatus('HandleMove' + item, 'FAILED');\n      return this.clientFilesystem.OnRemove([newPath]);\n    }\n  }\n  async HandleRename(item: string, newItemPath: string): Promise<any> {\n    try {\n      this.status.UpdateStatus('HandleRename' + item, 'SENDING');\n      this.logger.info('HandleRename', { item, newItemPath });\n      await Promise.all([\n        this.clientFilesystem.OnRename(item, newItemPath),\n        this.serverFilesystem.Rename(item, newItemPath)\n      ]);\n      this.status.UpdateStatus('HandleRename' + item, 'SUCCESS');\n    } catch (error) {\n      this.reportError(error, 'Cannot rename item', 'Rename Error');\n      this.status.UpdateStatus('HandleRename' + item, 'FAILED');\n      return this.clientFilesystem.OnRename(newItemPath, item);\n    }\n  }\n  async HandleEdit(item: string, content: string): Promise<any> {\n    try {\n      this.status.UpdateStatus('HandleEdit' + item, 'SENDING');\n      this.logger.info('HandleEdit', { item, content });\n      await Promise.all([\n        this.clientFilesystem.OnEdit(item, content),\n        this.serverFilesystem.Edit(item, content)\n      ]);\n      this.status.UpdateStatus('HandleEdit' + item, 'SUCCESS');\n    } catch (error) {\n      this.reportError(error, 'Cannot edit item', 'Edit Error');\n      this.status.UpdateStatus('HandleEdit' + item, 'FAILED');\n    }\n  }\n  async HandleGetcontent(item: string): Promise<string> {\n    try {\n      this.status.UpdateStatus('HandleGetcontent' + item, 'SENDING');\n      this.logger.info('HandleGetcontent', { item });\n      await this.clientFilesystem.OnGetcontent(item);\n      const response = await this.serverFilesystem.Getcontent(item);\n      this.status.UpdateStatus('HandleGetcontent' + item, 'SUCCESS');\n      return response.result;\n    } catch (error) {\n      this.reportError(error, 'Cannot get item', 'Get Content Error');\n      this.status.UpdateStatus('HandleGetcontent' + item, 'FAILED');\n    }\n  }\n  async HandleSetPermissions(\n    item: string,\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity,\n    recursive?: boolean\n  ): Promise<any> {\n    try {\n      this.status.UpdateStatus('HandleSetPermissions' + item, 'SENDING');\n      this.logger.info('HandleSetPermissions', {\n        item,\n        role,\n        entity,\n        recursive\n      });\n      await Promise.all([\n        this.clientFilesystem.OnSetPermissions(item, role, entity, recursive),\n        this.serverFilesystem.SetPermissions(item, role, entity, recursive)\n      ]);\n      this.status.UpdateStatus('HandleSetPermissions' + item, 'SUCCESS');\n    } catch (error) {\n      this.reportError(\n        error,\n        'Cannot set permissions to item',\n        'Permissions Error'\n      );\n      this.status.UpdateStatus('HandleSetPermissions' + item, 'FAILED');\n    }\n  }\n  async HandleMoveMultiple(items: string[], newPath: string): Promise<any> {\n    try {\n      this.status.UpdateStatus('HandleMoveMultiple' + items, 'SENDING');\n      this.logger.info('HandleMoveMultiple', { items, newPath });\n      await Promise.all([\n        this.clientFilesystem.OnMoveMultiple(items, newPath),\n        this.serverFilesystem.MoveMultiple(items, newPath)\n      ]);\n      this.status.UpdateStatus('HandleMoveMultiple' + items, 'SUCCESS');\n    } catch (error) {\n      this.reportError(error, 'Cannot move items', 'Move Error');\n      this.status.UpdateStatus('HandleMoveMultiple' + items, 'FAILED');\n    }\n  }\n  async HandleCopyMultiple(items: string[], newPath: string): Promise<any> {\n    try {\n      this.status.UpdateStatus('HandleCopyMultiple' + items, 'SENDING');\n      this.logger.info('HandleCopyMultiple', { items, newPath });\n      await Promise.all([\n        this.clientFilesystem.OnCopyMultiple(items, newPath),\n        this.serverFilesystem.CopyMultiple(items, newPath)\n      ]);\n      this.status.UpdateStatus('HandleCopyMultiple' + items, 'SUCCESS');\n    } catch (error) {\n      this.reportError(error, 'Cannot copy items', 'Copy Error');\n      this.status.UpdateStatus('HandleCopyMultiple' + items, 'FAILED');\n    }\n  }\n  async HandleSetPermissionsMultiple(\n    items: string[],\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity,\n    recursive?: boolean\n  ): Promise<any> {\n    try {\n      this.status.UpdateStatus(\n        'HandleSetPermissionsMultiple' + items,\n        'SENDING'\n      );\n      this.logger.info('HandleSetPermissionsMultiple', {\n        items,\n        role,\n        entity,\n        recursive\n      });\n      await Promise.all([\n        this.clientFilesystem.OnSetPermissionsMultiple(\n          items,\n          role,\n          entity,\n          recursive\n        ),\n        this.serverFilesystem.SetPermissionsMultiple(\n          items,\n          role,\n          entity,\n          recursive\n        )\n      ]);\n      this.status.UpdateStatus(\n        'HandleSetPermissionsMultiple' + items,\n        'SUCCESS'\n      );\n    } catch (error) {\n      this.reportError(\n        error,\n        'Cannot set permissions to items',\n        'Permissions Error'\n      );\n      this.status.UpdateStatus(\n        'HandleSetPermissionsMultiple' + items,\n        'FAILED'\n      );\n    }\n  }\n  async HandleSetPermissionsObjectMultiple(\n    items: string[],\n    permissionsObj: CoreTypes.FilePermissionsObject,\n    recursive?: boolean\n  ): Promise<any> {\n    try {\n      this.status.UpdateStatus(\n        'HandleSetPermissionsObjectMultiple' + items,\n        'SENDING'\n      );\n      this.logger.info('HandleSetPermissionsMultiple', {\n        items,\n        permissionsObj,\n        recursive\n      });\n      await Promise.all([\n        this.clientFilesystem.OnSetPermissionsObjectMultiple(\n          items,\n          permissionsObj,\n          recursive\n        ),\n        this.serverFilesystem.SetPermissionsObjectMultiple(\n          items,\n          permissionsObj,\n          recursive\n        )\n      ]);\n      this.status.UpdateStatus(\n        'HandleSetPermissionsObjectMultiple' + items,\n        'SUCCESS'\n      );\n    } catch (error) {\n      this.reportError(\n        error,\n        'Cannot set permissions to items',\n        'Permissions Error'\n      );\n      this.status.UpdateStatus(\n        'HandleSetPermissionsObjectMultiple' + items,\n        'FAILED'\n      );\n    }\n  }\n  async HandleRemove(items: string[]): Promise<any> {\n    try {\n      this.status.UpdateStatus('HandleRemove' + items, 'SENDING');\n      this.logger.info('HandleRemove', { items });\n      await Promise.all([\n        this.clientFilesystem.OnRemove(items),\n        this.serverFilesystem.Remove(items)\n      ]);\n      this.status.UpdateStatus('HandleRemove' + items, 'SUCCESS');\n    } catch (error) {\n      this.reportError(error, 'Cannot remove items', 'Remove Error');\n      this.status.UpdateStatus('HandleRemove' + items, 'FAILED');\n    }\n  }\n\n  async HandleNavigateUp(): Promise<any> {\n    const uuid = uuidv4();\n    try {\n      this.status.UpdateStatus('HandleNavigateUp' + uuid, 'SENDING');\n      this.logger.info('HandleNavigateUp');\n      const currentPath = await this.$CurrentPath.pipe(take(1)).toPromise();\n      const parentPath = path.dirname(currentPath);\n      await this.HandleList(parentPath);\n      this.status.UpdateStatus('HandleNavigateUp' + uuid, 'SUCCESS');\n    } catch (error) {\n      this.reportError(\n        error,\n        'Cannot navigate to parent directory',\n        'Navigate Error'\n      );\n      this.status.UpdateStatus('HandleNavigateUp' + uuid, 'FAILED');\n      throw new Error(error.message);\n    }\n  }\n\n  async onSelectItem(file: CoreTypes.ResFile) {\n    this.clientFilesystem.onSelectItem(file);\n  }\n\n  GetItemByName(filePath: string) {\n    const currentFiles = this.clientFilesystem.CurrentFiles();\n    const match = currentFiles.find(f => f.fullPath === filePath);\n    return match;\n  }\n\n  onSelectItemByName(filePath: string) {\n    const match = this.GetItemByName(filePath);\n    this.clientFilesystem.onSelectItem(match);\n  }\n\n  private async selectFirstInCurrentDirectory() {\n    const currentFiles = this.clientFilesystem.CurrentFiles();\n    const firstSelected = [...currentFiles].shift();\n    this.clientFilesystem.onSelectItem(firstSelected);\n  }\n\n  CloneProvider(): OptimisticFilesystemService {\n    const newClone = new OptimisticFilesystemService(\n      this.logger,\n      this.notifications,\n      this.status\n    );\n    newClone.initialize(\n      this.serverFilesystem.CloneProvider(),\n      this.clientFilesystem.CloneProvider()\n    );\n    return newClone;\n  }\n}\n","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n  template: `\n    <base-dialog\n      [header]=\"headerTemplate\"\n      [body]=\"bodyTemplate\"\n      [actions]=\"actionsTemplate\"\n    >\n      <ng-template #headerTemplate>\n        <h2>Set Permissions</h2>\n      </ng-template>\n      <ng-template #bodyTemplate>\n        <div>\n          <p>Would you like to set permissions for this folder?</p>\n        </div>\n      </ng-template>\n      <ng-template #actionsTemplate>\n        <btns-cancel-ok\n          okIcon=\"done\"\n          okLabel=\"Yes\"\n          (clickedCancel)=\"onCancel()\"\n          (clickedOk)=\"onSubmit()\"\n        >\n        </btns-cancel-ok>\n      </ng-template>\n    </base-dialog>\n  `,\n  styleUrls: ['../shared-utility-styles.scss'],\n})\nexport class AppDialogConfirmationComponent {\n  constructor(public dialogRef: MatDialogRef<AppDialogConfirmationComponent>) {}\n\n  onSubmit() {\n    this.dialogRef.close(true);\n  }\n  onCancel() {\n    this.dialogRef.close(false);\n  }\n}\n","import * as path from 'path-browserify';\nimport { CoreTypes } from '../../../core-types';\nimport { EnsureNoTrailingSlash, EnsureTrailingSlash } from '../../utils/path-helpers';\n\nexport function MakeItem2(itemPath: string): CoreTypes.ResFile {\n  return {\n    name: path.basename(itemPath),\n    fullPath: itemPath,\n    rightsFirebase: [],\n    permissions: {\n      others: 'read/write',\n      readers: ['Example Reader'],\n      writers: ['Example Writer', 'Managers']\n    },\n    size: '111',\n    date: new Date().toISOString(),\n    type: itemPath.endsWith('/') ? 'dir' : 'file'\n  };\n}\n\nexport function MakeFile(itemPath: string): CoreTypes.ResFile {\n  const filePath = EnsureNoTrailingSlash(itemPath);\n  return MakeItem2(filePath);\n}\n\nexport function MakeDir(itemPath: string): CoreTypes.ResFile {\n  const dirPath = EnsureTrailingSlash(itemPath);\n  return MakeItem2(dirPath);\n}\n\nexport const stubFiles = [\n  MakeFile('/image1.png'),\n  MakeFile('/image2.jpeg'),\n  MakeFile('/subfile.txt'),\n  MakeFile('/subfile.mp3'),\n  MakeFile('/subfile.mp4'),\n  MakeFile('/tables.csv'),\n  MakeFile('/time.docx'),\n  MakeDir('/emptyFolder/'),\n  MakeDir('/subfolder/'),\n  MakeFile('/subfolder/file.txt'),\n  MakeFile('/subfolder/file.png'),\n\n  MakeDir('/subfolder/xsub1/'),\n  MakeDir('/subfolder/ysub1/'),\n  MakeDir('/subfolder/2sub1/'),\n  MakeDir('/subfolder/1sub1/'),\n  MakeDir('/subfolder/sub1/'),\n  MakeFile('/subfolder/sub1/file.txt'),\n  MakeDir('/subfolder/sub1/sub1/'),\n  MakeFile('/subfolder/sub1/sub11/file.txt'),\n  MakeDir('/subfolder/sub1/sub11/sub111/'),\n  MakeFile('/subfolder/sub1/sub11/sub111/file.txt'),\n  MakeDir('/subfolder/sub1/sub12/'),\n  MakeFile('/subfolder/sub1/sub12/file.txt'),\n  MakeDir('/subfolder/sub1/sub12/sub112/'),\n  MakeFile('/subfolder/sub1/sub12/sub112/file.txt'),\n\n  MakeDir('/subfolder/sub2/'),\n  MakeFile('/subfolder/sub2/file.txt'),\n  MakeDir('/subfolder/sub2/sub21/'),\n  MakeFile('/subfolder/sub2/sub21/file.txt'),\n  MakeDir('/subfolder/sub2/sub21/sub211/'),\n  MakeFile('/subfolder/sub2/sub21/sub211/file.txt'),\n  MakeDir('/subfolder/sub2/sub22/'),\n  MakeFile('/subfolder/sub2/sub22/file.txt'),\n  MakeDir('/subfolder/sub2/sub22/sub221/'),\n  MakeFile('/subfolder/sub2/sub22/sub221/file.txt')\n];\n","import { Injectable } from '@angular/core';\nimport { take, map } from 'rxjs/operators';\nimport path from 'path-browserify';\nimport { FileSystemProvider, CoreTypes } from '../../../core-types';\nimport { LoggerService } from '../../services/logging/logger.service';\nimport {\n  RenameDialogInterface,\n  AppDialogRenameComponent,\n} from '../dialogs/dialog-rename.component';\nimport {\n  CopyDialogInterface,\n  AppDialogCopyComponent,\n} from '../dialogs/dialog-copy-or-move.component';\nimport {\n  PermissionsObjectDialogInterface,\n  PermissionsObjectDialogResponseInterface,\n  AppDialogPermissionsSetObjectComponent,\n} from '../dialogs/dialog-permissions-setobject.component';\nimport {\n  UploadDialogInterface,\n  UploadDialogResponseInterface,\n  AppDialogUploadFilesComponent,\n} from '../dialogs/dialog-upload.component';\nimport { AppDialogNewFolderComponent } from '../dialogs/dialog-new-folder.component';\nimport { FileManagerConfig } from '../../configuration/client-configuration';\nimport { ClientFileSystemService } from '../../services/pure/client-filesystem.service';\nimport { OptimisticFilesystemService } from '../../services/pure/optimistic-filesystem.service';\nimport { NotificationService } from '../../services/pure/notification.service';\nimport { AppDialogConfirmationComponent } from '../dialogs/dialog-confirmation.component';\nimport { MakeDir } from '../../services/stub/stub-files';\nimport { MatDialog } from '@angular/material/dialog';\n\n@Injectable()\nexport class ActionHandlersService {\n  private fileSystem: FileSystemProvider;\n  private config: FileManagerConfig;\n\n  // Getters\n\n  get $CurrentPath() {\n    return this.optimisticFs.$CurrentPath;\n  }\n\n  public async GetCurrentPath() {\n    const current = await this.$CurrentPath.pipe(take(1)).toPromise();\n    return current || '';\n  }\n\n  public ConvertToRelativePath(directoryPath: string): string {\n    const rootLength = (this.config.virtualRoot || '').length;\n    return (directoryPath || '').slice(rootLength);\n  }\n  public GetRootPath(): string {\n    return this.config.virtualRoot || '';\n  }\n\n  get $CurrentPathIsRoot() {\n    return this.$CurrentPath.pipe(map((p) => p === this.config.virtualRoot));\n  }\n\n  get $SelectedFile() {\n    return this.optimisticFs.$SelectedFile;\n  }\n\n  get $FilesWithIcons() {\n    return this.optimisticFs.$FilesWithIcons;\n  }\n\n  constructor(\n    private clientFilesystem: ClientFileSystemService,\n    private optimisticFs: OptimisticFilesystemService,\n    private dialog: MatDialog,\n    private logger: LoggerService,\n    private notifications: NotificationService\n  ) {}\n\n  public async init(fileSystem: FileSystemProvider, config: FileManagerConfig) {\n    this.config = config;\n    this.fileSystem = fileSystem;\n    this.logger.info('init()', { fileSystem, config });\n    this.optimisticFs.initialize(this.fileSystem, this.clientFilesystem);\n    try {\n      await this.clientFilesystem.OnList(config.initialPath);\n    } catch (error) {\n      this.logger.error('init() OnNewFolderClobber: error', error, {\n        fileSystem,\n        config,\n      });\n    }\n  }\n\n  public async OnRename(file: CoreTypes.ResFile) {\n    const data: RenameDialogInterface = {\n      currentPath: file.fullPath,\n    };\n    this.logger.info('OnRename', { data });\n    const renamedPath = await this.openDialog(AppDialogRenameComponent, data);\n    if (!renamedPath) {\n      this.notifications.notifyCancelled();\n      return;\n    }\n    try {\n      await this.optimisticFs.HandleRename(file.fullPath, renamedPath);\n      await this.RefreshExplorer();\n      setTimeout(() => {\n        this.optimisticFs.onSelectItemByName(renamedPath);\n      }, 300);\n    } catch (error) {\n      this.logger.error('OnRename', { error });\n      this.notifications.notify(error.message, 'Rename Error');\n    }\n  }\n\n  public async OnMoveMultiple(files: CoreTypes.ResFile[]) {\n    const data: CopyDialogInterface = {\n      files: files,\n      isCopy: false,\n      actionHandler: this,\n    };\n    const newFolderPath = await this.openDialog(AppDialogCopyComponent, data);\n    if (!newFolderPath) {\n      this.notifications.notifyCancelled();\n      return;\n    }\n    try {\n      const filePaths = files.map((f) => f.fullPath);\n      await this.optimisticFs.HandleMoveMultiple(filePaths, newFolderPath);\n      await this.RefreshExplorer();\n    } catch (error) {\n      this.logger.error('OnMoveMultiple', { error });\n      this.notifications.notify(error.message, 'Move Error');\n    }\n  }\n\n  public async OnCopyMultiple(files: CoreTypes.ResFile[]) {\n    const data: CopyDialogInterface = {\n      files: files,\n      isCopy: true,\n      actionHandler: this,\n    };\n    const newFolderPath = await this.openDialog(AppDialogCopyComponent, data);\n    this.logger.info('OnCopyMultiple', { files, newFolderPath });\n    if (!newFolderPath) {\n      this.notifications.notifyCancelled();\n      return;\n    }\n    try {\n      const filePaths = files.map((f) => f.fullPath);\n      await this.optimisticFs.HandleCopyMultiple(filePaths, newFolderPath);\n      await this.RefreshExplorer();\n    } catch (error) {\n      this.logger.error('OnCopyMultiple', { error });\n      this.notifications.notify(error.message, 'Copy Error');\n    }\n  }\n\n  private checkCanAddPermissions() {\n    if (!this.config.users) {\n      throw new Error('The \"config.users\" property was not defined');\n    }\n    if (!this.config.groups) {\n      throw new Error('The \"config.groups\" property was not defined');\n    }\n  }\n\n  public async OnSetPermissionsMultiple(files: CoreTypes.ResFile[]) {\n    return this.OnSetPermissionsObjectMultiple(files);\n  }\n\n  public async OnSetPermissionsObjectMultiple(files: CoreTypes.ResFile[]) {\n    const data: PermissionsObjectDialogInterface = {\n      files: files,\n      config: this.config,\n    };\n    try {\n      this.checkCanAddPermissions();\n    } catch (error) {\n      this.notifications.notify(error.message, 'Permissions Error');\n      return;\n    }\n\n    const res: PermissionsObjectDialogResponseInterface = await this.openDialog(\n      AppDialogPermissionsSetObjectComponent,\n      data\n    );\n    if (!res) {\n      this.notifications.notifyCancelled();\n      return;\n    }\n    try {\n      const filePaths = files.map((f) => f.fullPath);\n      await this.optimisticFs.HandleSetPermissionsObjectMultiple(\n        filePaths,\n        res.permissionsObj,\n        true\n      );\n      await this.RefreshExplorer();\n    } catch (error) {\n      this.logger.error('OnSetPermissionsMultiple', { error });\n      this.notifications.notify(error.message, 'Permissions Error');\n    }\n  }\n\n  public async OnDeleteMultiple(files: CoreTypes.ResFile[]) {\n    try {\n      const deletedPaths = files.map((f) => f.fullPath);\n      this.logger.info('deleting files', { files, deletedPaths });\n      await this.optimisticFs.HandleRemove(deletedPaths);\n      await this.RefreshExplorer();\n    } catch (error) {\n      this.logger.error('OnDeleteMultiple', { error });\n      this.notifications.notify(error.message, 'Deletion Error');\n    }\n  }\n\n  // Misc\n\n  public async OnNavigateTo(folderPath: string) {\n    this.logger.info('action-handlers.OnNavigateTo', { folderPath });\n    return this.optimisticFs.HandleList(folderPath);\n  }\n\n  public async OnNavigateToParent() {\n    this.logger.info('OnNavigateToParent');\n    await this.optimisticFs.HandleNavigateUp();\n  }\n\n  public async OnSelectItemByPath(itemPath: string) {\n    this.optimisticFs.onSelectItemByName(itemPath);\n  }\n\n  public async OnUploadFilesToCurrentDirectory() {\n    this.logger.info('onClickUpload');\n    const currentPath = await this.GetCurrentPath();\n    const data: UploadDialogInterface = {\n      currentDirectory: currentPath,\n      firebaseConfig: this.config.firebaseConfig,\n      bucketName: this.config.bucketName,\n    };\n    const res: UploadDialogResponseInterface = await this.openDialog(\n      AppDialogUploadFilesComponent,\n      data\n    );\n    if (!res) {\n      this.logger.info('onClickUpload canceled...');\n      return;\n    }\n    const filesToAdd = res.uploaded.map((f) => path.join(currentPath, f));\n    await this.optimisticFs.HandleUpload(filesToAdd);\n    await this.optimisticFs.HandleList(currentPath);\n  }\n\n  public async OnNewFolderInCurrentDirectory() {\n    this.logger.info('onClickNewFolder');\n    const newDirName = await this.openDialog(AppDialogNewFolderComponent);\n    if (!newDirName) {\n      this.logger.info('onClickNewFolder   no folder created...');\n      return;\n    }\n    await this.OnNewFolder(newDirName);\n    const setPermissions = await this.openDialog(\n      AppDialogConfirmationComponent\n    );\n\n    if (setPermissions) {\n      const currentDirectory = await this.GetCurrentPath();\n      const newDirectoryPath = path.join(currentDirectory, newDirName);\n      const folder = MakeDir(newDirectoryPath);\n      await this.OnSetPermissionsMultiple([folder]);\n    }\n  }\n\n  public async OnNewFolder(newDirName: string) {\n    const currentDirectory = await this.GetCurrentPath();\n    const newDirectoryPath = path.join(currentDirectory, newDirName);\n    await this.optimisticFs.HandleCreateFolder(newDirectoryPath);\n    await this.optimisticFs.HandleList(currentDirectory);\n  }\n\n  public async OnNewFolderClobber(newDirName: string) {\n    if (newDirName === '/') {\n      return;\n    }\n    const currentDirectory = await this.GetCurrentPath();\n    const newDirectoryPath = path.join(currentDirectory, newDirName);\n    await this.optimisticFs.HandleCreateFolder(newDirectoryPath, true);\n    await this.optimisticFs.HandleList(currentDirectory);\n  }\n\n  public async OnDownloadFile(file: CoreTypes.ResFile) {\n    const res = await this.fileSystem.GetSingle(file.fullPath);\n    const newFile = res.result.file;\n    await this.optimisticFs.onSelectItem(newFile);\n    this.initiateDownload(file.name, res.result.url);\n    const currentDirectory = await this.GetCurrentPath();\n    await this.optimisticFs.HandleList(currentDirectory);\n  }\n\n  private initiateDownload(filename: string, url: string) {\n    this.logger.info('initiateDownload...', { url });\n    const link = document.createElement('a');\n    link.download = filename;\n    link.target = '_blank';\n    link.href = url;\n    link.click();\n  }\n\n  public async RefreshExplorer() {\n    const currentPath = await this.GetCurrentPath();\n    return this.optimisticFs.HandleList(currentPath);\n  }\n\n  private async openDialog(comp: any, data?: any) {\n    const ref = this.dialog.open(comp, {\n      width: '600px',\n      hasBackdrop: true,\n      disableClose: false,\n      data: data,\n    });\n    const result = await ref.afterClosed().pipe(take(1)).toPromise();\n    return result;\n  }\n\n  public async CloneProvider(): Promise<ActionHandlersService> {\n    const cloned = new ActionHandlersService(\n      this.clientFilesystem.CloneProvider(),\n      this.optimisticFs.CloneProvider(),\n      this.dialog,\n      this.logger,\n      this.notifications\n    );\n    await cloned.init(this.fileSystem, this.config);\n    return cloned;\n  }\n\n  //Search \n  public ListCurrentPathItems(path: string): Promise<CoreTypes.ResBodyList> {\n    return this.fileSystem.List(path);\n  }\n}\n","export function sortObjectArrayCase(fieldName, direction?: 'asc' | 'desc') {\n  return (a, b) => {\n    const val_a = (a[fieldName] + '').toLowerCase();\n    const val_b = (b[fieldName] + '').toLowerCase();\n    if (val_a < val_b) {\n      return direction === 'desc' ? 1 : -1;\n    }\n    if (val_a > val_b) {\n      return direction === 'desc' ? -1 : 1;\n    }\n    return 0;\n  };\n}\n","import { OnInit, Component, Input, OnDestroy } from '@angular/core';\nimport { take, map, takeUntil, tap } from 'rxjs/operators';\nimport { Subject, BehaviorSubject, Observable, of } from 'rxjs';\nimport { FileSystemProvider, CoreTypes } from '../../../core-types';\nimport { LoggerService } from '../../services/logging/logger.service';\nimport { ActionHandlersService } from './action-handlers.service';\nimport { ClientFileSystemService } from '../../services/pure/client-filesystem.service';\nimport { OptimisticFilesystemService } from '../../services/pure/optimistic-filesystem.service';\nimport { FileManagerConfig } from '../../configuration/client-configuration';\nimport { FilemanagerStatusService } from '../../services/state/status.service';\nimport { sortObjectArrayCase } from '../../utils/sort-helpers';\nimport { FileActionDefinition } from '../file-table/FileActionDefinition';\nimport { BulkActionDefinition } from '../actions-toolbars/BulkActionDefinition';\nimport { MainActionDefinition } from '../actions-toolbars/MainActionDefinition';\nimport { FileDetailActionDefinition } from '../file-details/FileDetailActionDefinition';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'ngx-filemanager',\n  templateUrl: 'main-file-manager.component.html',\n  styleUrls: ['main-file-manager.component.scss', '../shared-utility-styles.scss'],\n  providers: [\n    ActionHandlersService,\n    ClientFileSystemService,\n    OptimisticFilesystemService\n  ]\n  \n})\nexport class LibMainFileManagerComponent implements OnInit, OnDestroy {\n  @Input()\n  fileSystem: FileSystemProvider;\n  @Input()\n  config: FileManagerConfig;\n\n  public isFileDetailsOpen = true;\n\n  public $BulkSelected = new BehaviorSubject<CoreTypes.ResFile[]>([]);\n  public $triggerClearSelected = new Subject<void>();\n\n  public initLoaded;\n  public requestMap;\n\n  $CurrentPath: Observable<string>;\n  SelectedFile: CoreTypes.ResFile;\n\n  destroyed = new Subject();\n\n  folderActions: FileActionDefinition[];\n  fileActions: FileActionDefinition[];\n  bulkActions: BulkActionDefinition[];\n  mainActions: MainActionDefinition[];\n\n  fileDetailActions: FileDetailActionDefinition[];\n\n  folders$: Observable<CoreTypes.ResFile[]>;\n  files$: Observable<CoreTypes.ResFile[]>;\n\n  enableSearch: boolean = false;\n  searchForm: FormGroup;\n  searchKeyword: string = '';\n  seachResultDocuments: CoreTypes.ResFile[] = [];\n  seachResultFolders: CoreTypes.ResFile[] = [];\n  documentsShow: number = 10;\n  foldersShow: number = 10;\n  isSearching: boolean = false;\n  showSearchingSpinner: boolean = false;\n\n  constructor(\n    private actionHandlers: ActionHandlersService,\n    private logger: LoggerService,\n    private status: FilemanagerStatusService,\n  ) {\n    this.requestMap = this.status.ActiveRequestsMap;\n    this.searchForm = new FormGroup({\n      searchKeyword: new FormControl('', [Validators.minLength(3)]),\n    });\n  }\n\n  // Getters\n\n  get $status() {\n    return this.status.ActiveRequestsMap.pipe(\n      map(requests => {\n        return Object.keys(requests).map(k => requests[k].status);\n      })\n    );\n  }\n\n  get $hasSending() {\n    return this.$status.pipe(\n      map(s => !!s.find(status => status === 'SENDING'))\n    );\n  }\n\n  get $hasFailed() {\n    return this.$status.pipe(map(s => !!s.find(status => status === 'FAILED')));\n  }\n\n  async ngOnInit() {\n    if (!this.fileSystem) {\n      throw new Error(\n        '<ngx-filemanager> must have input selector [fileSystem] set'\n      );\n    }\n    if (!this.config) {\n      throw new Error(\n        '<ngx-filemanager> must have input selector [config] set'\n      );\n    }\n    if (!this.config.virtualRoot) {\n      console.warn(\n        '<ngx-filemanager> warning config.virtualRoot not set, using bucket root \"/\"'\n      );\n      this.config.virtualRoot = '/';\n    }\n    if (this.config.virtualRoot.endsWith('/')) {\n      this.config.virtualRoot = this.config.virtualRoot.slice(0, -1);\n    }\n    if (!this.config.initialPath) {\n      console.warn(\n        '<ngx-filemanager> warning config.initialPath not set, using virtualRoot: ' +\n          this.config.virtualRoot\n      );\n      this.config.initialPath = this.config.virtualRoot;\n    }\n    await this.actionHandlers.init(this.fileSystem, this.config);\n    await this.actionHandlers.OnNavigateTo(this.config.virtualRoot);\n    this.$CurrentPath = this.actionHandlers.$CurrentPath;\n    this.actionHandlers.$SelectedFile\n      .pipe(\n        takeUntil(this.destroyed),\n        tap(selectedFile => {\n          console.log('this.$SelectedFile.pipe', { selectedFile });\n          this.SelectedFile = null;\n          setTimeout(() => {\n            this.SelectedFile = selectedFile;\n          });\n        })\n      )\n      .subscribe();\n    this.makeConfig();\n    this.initLoaded = true;\n    this.enableSearch = !!this.config.enableSearch || false;\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n  }\n\n  makeConfig() {\n    this.fileActions = [\n      {\n        label: 'Download',\n        icon: 'file_download',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnDownloadFile(file)\n      },\n      {\n        label: 'Copy',\n        icon: 'content_copy',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnCopyMultiple([file])\n      },\n      {\n        label: 'Move',\n        icon: 'forward',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnMoveMultiple([file])\n      },\n      {\n        label: 'Rename',\n        icon: 'border_color',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnRename(file)\n      },\n      {\n        label: 'Permissions',\n        icon: 'lock_outline',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnSetPermissionsMultiple([file])\n      },\n      {\n        label: 'Delete',\n        icon: 'delete',\n        color: 'warn',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnDeleteMultiple([file])\n      }\n    ];\n    this.folderActions = [\n      {\n        label: 'Copy',\n        icon: 'content_copy',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnCopyMultiple([file])\n      },\n      {\n        label: 'Move',\n        icon: 'forward',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnMoveMultiple([file])\n      },\n      {\n        label: 'Rename',\n        icon: 'border_color',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnRename(file)\n      },\n      {\n        label: 'Permissions',\n        icon: 'lock_outline',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnSetPermissionsMultiple([file])\n      },\n      {\n        label: 'Delete',\n        icon: 'delete',\n        color: 'warn',\n        onClick: async (file: CoreTypes.ResFile) =>\n          this.actionHandlers.OnDeleteMultiple([file])\n      }\n    ];\n    this.bulkActions = [\n      {\n        label: 'Cancel',\n        icon: 'clear',\n        onClick: async (item: CoreTypes.ResFile[]) => this.ClearBulkSelected()\n      },\n      {\n        label: 'Copy',\n        icon: 'content_copy',\n        onClick: (items: CoreTypes.ResFile[]) =>\n          this.actionHandlers.OnCopyMultiple([...items])\n      },\n      {\n        label: 'Move',\n        icon: 'forward',\n        onClick: (items: CoreTypes.ResFile[]) =>\n          this.actionHandlers.OnMoveMultiple(items)\n      },\n      {\n        label: 'Set Permissions',\n        icon: 'lock_outline',\n        onClick: (items: CoreTypes.ResFile[]) =>\n          this.actionHandlers.OnSetPermissionsObjectMultiple(items),\n        $disabled: of(!this.config.isAdmin)\n      },\n      {\n        label: 'Delete',\n        icon: 'delete',\n        color: 'warn',\n        onClick: (items: CoreTypes.ResFile[]) =>\n          this.actionHandlers.OnDeleteMultiple(items),\n        $disabled: of(!this.config.isAdmin)\n      }\n    ];\n    this.mainActions = [\n      {\n        label: 'Back Folder',\n        icon: 'reply',\n        onClick: async () => this.actionHandlers.OnNavigateToParent(),\n        $disabled: this.actionHandlers.$CurrentPathIsRoot\n      },\n      {\n        label: 'Refresh',\n        icon: 'refresh',\n        onClick: async () => this.actionHandlers.RefreshExplorer()\n      },\n      {\n        label: 'Upload Files',\n        icon: 'file_upload',\n        onClick: async () =>\n          this.actionHandlers.OnUploadFilesToCurrentDirectory()\n      },\n      {\n        label: 'New Folder',\n        icon: 'create_new_folder',\n        onClick: async () => this.actionHandlers.OnNewFolderInCurrentDirectory()\n      }\n    ];\n    this.fileDetailActions = [\n      {\n        label: 'Download',\n        toolTip: 'Click to Download',\n        icon: 'file_download',\n        $disabled: this.actionHandlers.$SelectedFile.pipe(map(f => !f || f.type !== 'file')),\n        onClick: async (file) => this.actionHandlers.OnDownloadFile(file)\n      },\n      {\n        label: 'Rename',\n        toolTip: 'Click to Rename',\n        icon: 'border_color',\n        $disabled: of(!this.config.isAdmin),\n        onClick: async (file) => this.actionHandlers.OnRename(file)\n      },\n      {\n        label: 'Set Permissions',\n        toolTip: 'Click to Set Permissions',\n        icon: 'lock_outline',\n        $disabled: of(!this.config.isAdmin),\n        onClick: async (file) => this.actionHandlers.OnSetPermissionsObjectMultiple([file])\n      },\n      {\n        label: 'Delete',\n        toolTip: 'Click to Delete',\n        icon: 'delete',\n        $disabled: of(!this.config.isAdmin),\n        color: 'warn',\n        onClick: async (file) => this.actionHandlers.OnDeleteMultiple([file])\n      }\n    ];\n    const allFiles$ = new BehaviorSubject<CoreTypes.ResFile[]>([]);\n    this.actionHandlers.$FilesWithIcons.subscribe(files =>\n      allFiles$.next(files)\n    );\n    this.folders$ = allFiles$.pipe(\n      tap(folders => console.log('folders', { folders })),\n      map(items =>\n        items\n          .filter(a => a.type === 'dir')\n          .sort(sortObjectArrayCase('name', 'asc'))\n      )\n    );\n    this.files$ = allFiles$.pipe(\n      tap(files => console.log('files', { files })),\n      map(items =>\n        items\n          .filter(a => a.type === 'file')\n          .sort(sortObjectArrayCase('name', 'asc'))\n      )\n    );\n  }\n\n  async onEnterFolder(itemPath: string) {\n    this.logger.info('onSelectItemDoubleClick!', { itemPath });\n    this.ClearBulkSelected();\n    return this.actionHandlers.OnNavigateTo(itemPath);\n  }\n  async onSelectedFilePath(itemPath: string) {\n    this.logger.info('onSelectItem!', { itemPath });\n    return this.actionHandlers.OnSelectItemByPath(itemPath);\n  }\n\n  public async onDetailsClickDelete(file: CoreTypes.ResFile) {\n    await this.actionHandlers.OnDeleteMultiple([file]);\n  }\n  public async onDetailsClickDownload(file: CoreTypes.ResFile) {\n    await this.actionHandlers.OnDownloadFile(file);\n  }\n  public async onDetailsClickRename(file: CoreTypes.ResFile) {\n    await this.actionHandlers.OnRename(file);\n  }\n  public async onDetailsClickSinglePermissions(file: CoreTypes.ResFile) {\n    await this.actionHandlers.OnSetPermissionsMultiple([file]);\n    await this.actionHandlers.OnSelectItemByPath(file.fullPath);\n  }\n\n  public async onClickCrumb(newPath: string) {\n    this.ClearBulkSelected();\n    this.logger.info('onClickCrumb', { newPath });\n    return this.actionHandlers.OnNavigateTo(newPath);\n  }\n\n  public ClearBulkSelected() {\n    this.$triggerClearSelected.next();\n    this.$BulkSelected.next([]);\n  }\n\n  // Search\n  public async searchAllDocumentsAndFolders(keyword: string) {\n    keyword = keyword.toLocaleLowerCase().trim();\n    if(!this.searchForm.valid){ \n      return\n    };\n    await this.initCleanSearchResults();\n    const startPath = this.actionHandlers.GetRootPath();\n    this.isSearching = true;\n    this.showSearchingSpinner = true;\n    this.iterateCurrentDocumentAndFolders(startPath, keyword, 0);\n  }\n\n  private async iterateCurrentDocumentAndFolders(currentPath: string, keyword: string, level: number) {\n      if(level > 100) {\n        this.isSearching = false;\n      }\n      if(this.showSearchingSpinner) {\n        this.showSearchingSpinner = (this.isSearching&&this.seachResultDocuments.length===0&&this.seachResultFolders.length===0&&level < 3);\n      }\n      if(!this.isSearching) {\n        return\n      }\n\n      const currentVisiableDocuments: CoreTypes.ResFile[] = (await this.actionHandlers.ListCurrentPathItems(currentPath)).result;\n      currentVisiableDocuments.forEach((item: CoreTypes.ResFile)=>{\n        console.log( item, 'item.type', item.type)\n        if(item.type==='file') {\n          if(this.checkSearchKeywordRelative(item.name, keyword)) {\n            this.seachResultDocuments.push(item);\n          }\n        } else if(item.type==='dir') {\n          if(this.checkSearchKeywordRelative(item.name, keyword)) {\n            this.seachResultFolders.push(item);\n          }\n          this.iterateCurrentDocumentAndFolders(item.fullPath, keyword, level+1);\n        }\n      });\n  }\n\n  public checkSearchKeywordRelative(targetName: string, keyword: string) {\n    return targetName.toLowerCase().includes(keyword);\n  }\n\n  public initCleanSearchResults() {\n    this.isSearching = false;\n    this.showSearchingSpinner = false;\n    return new Promise<void>((resolve)=>{\n      setTimeout(() => {\n        this.seachResultDocuments = [];\n        this.seachResultFolders = [];\n        this.foldersShow = 5;\n        this.documentsShow = 5;\n        resolve();\n      }, 10);\n    })\n  }\n\n  public onSelectedSearchItem(item: CoreTypes.ResFile) {\n    //this.initCleanSearchResults();\n    if(item.type === 'file') {\n      let fileParentPath = item.fullPath.substring(0, item.fullPath.lastIndexOf('/'));\n      this.onEnterFolder(fileParentPath);\n    } else if (item.type === 'dir') {\n      this.onEnterFolder(item.fullPath);\n    }\n  }\n}\n","import * as path from 'path-browserify';\nimport { EnsureAbsoluteDirectory } from '../../utils/path-helpers';\n\nexport interface BreadCrumb {\n  label: string;\n  path?: string;\n  icon?: string;\n  virtualPath?: string;\n}\n\nfunction MakeRootCrumb(virtualRoot): BreadCrumb {\n  return {\n    label: '',\n    icon: 'home',\n    path: virtualRoot,\n    virtualPath: '/'\n  };\n}\n\nfunction MakeWarningCrumb(virtualRoot): BreadCrumb {\n  return {\n    label: '',\n    icon: 'mood_bad',\n    path: virtualRoot,\n    virtualPath: virtualRoot\n  };\n}\n\nconst MakeCrumbs = (virtualRoot: string, absolutePath: string) => {\n  const virtualRootParsed = EnsureAbsoluteDirectory(virtualRoot);\n  const absolutePathParsed = EnsureAbsoluteDirectory(absolutePath);\n  if (absolutePathParsed.indexOf(virtualRootParsed) !== 0) {\n    console.warn('Absolute path is not within the virtualRoot', {virtualRoot, absolutePath});\n    return [MakeWarningCrumb(virtualRootParsed)];\n  }\n\n  if (absolutePathParsed === virtualRootParsed) {\n    return [MakeRootCrumb(virtualRootParsed)];\n  }\n\n  const relativeVirtualRoot = absolutePathParsed.slice(\n    virtualRootParsed.length\n  );\n  const crumbs: BreadCrumb[] = [];\n  relativeVirtualRoot\n    .split('/')\n    .filter(p => !!p)\n    .reduce((currentPath, curr) => {\n      const dirname = path.basename(currentPath);\n      const crumb = {\n        label: dirname,\n        path: EnsureAbsoluteDirectory(virtualRootParsed + currentPath),\n        virtualPath: EnsureAbsoluteDirectory(currentPath)\n      };\n      crumbs.unshift(crumb);\n      const parentPath = path.dirname(currentPath);\n      return parentPath;\n    }, relativeVirtualRoot);\n\n  crumbs.unshift(MakeRootCrumb(virtualRootParsed));\n  return crumbs;\n};\n\nexport const crumbFactory = {\n  MakeCrumbs: MakeCrumbs\n};\n","import { Component, Input, EventEmitter, Output } from '@angular/core';\nimport { crumbFactory, BreadCrumb } from './crumb-factory';\nimport { FileManagerConfig } from '../../configuration/client-configuration';\nimport { LoggerService } from '../../services/logging/logger.service';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'bread-crumbs',\n  template: `\n    <div class=\"flex-row align-center\">\n      <div\n        class=\"flex-row align-center\"\n        *ngFor=\"let crumb of crumbs; let first = first; let last = last\"\n      >\n        <div class=\"divider\" *ngIf=\"!first\">\n          >\n        </div>\n        <button\n          #myButton\n          class=\"crumb\"\n          mat-raised-button\n          color=\"secondary\"\n          [disabled]=\"last\"\n          (click)=\"onClickCrumb(crumb); myButton.disabled = true\"\n        >\n          <mat-icon *ngIf=\"crumb.icon\">{{ crumb.icon }}</mat-icon>\n          {{ crumb.label }}\n        </button>\n      </div>\n    </div>\n  `,\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppBreadCrumbsComponent {\n  crumbs: BreadCrumb[];\n\n  @Output()\n  clickedCrumb = new EventEmitter<string>();\n\n  _currentPath: string;\n  @Input()\n  set currentPath(newPath) {\n    this._currentPath = newPath;\n    this.makeCrumbs(newPath);\n  }\n  _config: FileManagerConfig;\n  @Input()\n  set config(newConfig) {\n    this._config = newConfig;\n    this.makeCrumbs(this._currentPath);\n  }\n\n  constructor(private logger: LoggerService) {}\n\n  private makeCrumbs(newPath: string) {\n    if (!this._config) {\n      return;\n    }\n    const virtualRoot = this._config.virtualRoot;\n    this.crumbs = crumbFactory.MakeCrumbs(virtualRoot, newPath || virtualRoot);\n\n    this.logger.info('makeCrumbs', {\n      crumbs: this.crumbs,\n      virtualRoot,\n      newPath\n    });\n  }\n\n  onClickCrumb(crumb: BreadCrumb) {\n    this.logger.info('onClickCrumb', { crumb });\n    this.clickedCrumb.emit(crumb.path);\n  }\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { BulkActionDefinition } from './BulkActionDefinition';\nimport { CoreTypes } from '../../../core-types';\nimport { Observable } from 'rxjs';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'bulk-actions',\n  template: `\n    <mat-toolbar color=\"primary\">\n      <mat-toolbar-row class=\"top-toolbar\">\n        <span class=\"top-toolbar-label\">\n          Bulk Actions\n        </span>\n      </mat-toolbar-row>\n      <mat-toolbar-row class=\"action-toolbar scroll-x\">\n        <div class=\"flex-row\" *ngIf=\"bulkSelected$ | async as selected\">\n          <div *ngFor=\"let action of bulkActions\">\n            <button\n              class=\"mr-10 flex-row align-center\"\n              mat-raised-button\n              [disabled]=\"action.$disabled | async\"\n              [color]=\"action.color\"\n              (click)=\"executeAction(action, selected)\"\n            >\n              <mat-icon>{{ action.icon }}</mat-icon>\n              {{ action.label }}\n            </button>\n          </div>\n        </div>\n      </mat-toolbar-row>\n    </mat-toolbar>\n  `,\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppBulkActionsComponent {\n  @Input()\n  bulkActions: BulkActionDefinition[];\n  @Input()\n  bulkSelected$: Observable<CoreTypes.ResFile[]>;\n  @Output()\n  clearSelected = new EventEmitter<void>();\n\n  async executeAction(\n    action: BulkActionDefinition,\n    selected: CoreTypes.ResFile[]\n  ) {\n    await action.onClick(selected);\n    this.clearSelected.emit();\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { MainActionDefinition } from './MainActionDefinition';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'main-actions',\n  template: `\n    <mat-toolbar>\n      <mat-toolbar-row class=\"top-toolbar\">\n        <span class=\"top-toolbar-label\">\n          Folder Actions\n        </span>\n      </mat-toolbar-row>\n      <mat-toolbar-row class=\"action-toolbar scroll-x\">\n        <div *ngFor=\"let action of mainActions\">\n          <button\n            class=\"mr-10 has-pointer\"\n            mat-raised-button\n            [color]=\"action.color\"\n            (click)=\"action.onClick(action)\"\n            [disabled]=\"action.$disabled | async\"\n          >\n            <mat-icon inline=\"true\">{{ action.icon }}</mat-icon>\n            {{ action.label }}\n          </button>\n        </div>\n      </mat-toolbar-row>\n    </mat-toolbar>\n  `,\n  styleUrls: ['../shared-utility-styles.scss'],\n  styles: [\n    `\n      .top-toolbar-label {\n        color: #8a8a8a;\n      }\n    `\n  ]\n})\nexport class AppMainActionsComponent {\n  @Input()\n  mainActions: MainActionDefinition[];\n}\n","export async function promiseDelay(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n","export interface FileIcon {\n  /**\n   * Name of the icon, e.g. 'javascript'\n   */\n  name: string;\n\n  /**\n   * Define the file extensions that should use this icon.\n   * E.g. ['js']\n   */\n  fileExtensions?: string[];\n\n  /**\n   * Define if there are some static file names that should apply this icon.\n   * E.g. ['sample.js']\n   */\n  fileNames?: string[];\n\n  /**\n   * Define if there is a light icon available.\n   */\n  light?: boolean;\n\n  /**\n   * Define if there is a high contrast icon available.\n   */\n  highContrast?: boolean;\n\n  /**\n   * Define if the icon should be disabled.\n   */\n  disabled?: boolean;\n}\n\nexport interface FolderTheme {\n  /**\n   * Name of the theme\n   */\n  name: string;\n\n  /**\n   * Define the default icon for folders in a theme.\n   */\n  defaultIcon: DefaultIcon;\n\n  /**\n   * Icon for root folders.\n   */\n  rootFolder?: DefaultIcon;\n\n  /**\n   * Defines folder icons for specific folder names.\n   */\n  icons?: FolderIcon[];\n}\n\nexport interface FolderIcon {\n  /**\n   * Name of the icon, e.g. 'src'\n   */\n  name: string;\n\n  /**\n   * Define the folder names that should apply the icon.\n   * E.g. ['src', 'source']\n   */\n  folderNames: string[];\n\n  /**\n   * Define if there is a light icon available.\n   */\n  light?: boolean;\n\n  /**\n   * Define if there is a high contrast icon available.\n   */\n  highContrast?: boolean;\n\n  /**\n   * Define if the icon should be disabled.\n   */\n  disabled?: boolean;\n}\n\nexport interface DefaultIcon {\n  /**\n   * Name of the icon, e.g. 'src'\n   */\n  name: string;\n\n  /**\n   * Define if there is a light icon available.\n   */\n  light?: boolean;\n\n  /**\n   * Define if there is a high contrast icon available.\n   */\n  highContrast?: boolean;\n}\n\nexport class FileIcons {\n  /**\n   * Define the default icon for files.\n   */\n  defaultIcon: DefaultIcon;\n\n  /**\n   * Defines all folder icons.\n   */\n  icons?: FileIcon[];\n}\n\nexport const fileIcons: FileIcons = {\n  defaultIcon: { name: 'file' },\n  icons: [\n    { name: 'word', fileExtensions: ['doc', 'docx', 'rtf'] },\n    { name: 'pdf', fileExtensions: ['pdf'] },\n    { name: 'table', fileExtensions: ['xlsx', 'xls', 'csv', 'tsv'] },\n    {\n      name: 'html',\n      fileExtensions: ['html', 'htm', 'xhtml', 'html_vm', 'asp']\n    },\n    {\n      name: 'markdown',\n      fileExtensions: ['md', 'markdown', 'rst']\n    },\n    { name: 'yaml', fileExtensions: ['yaml', 'YAML-tmLanguage', 'yml'] },\n    {\n      name: 'xml',\n      fileExtensions: [\n        'xml',\n        'plist',\n        'xsd',\n        'dtd',\n        'xsl',\n        'xslt',\n        'resx',\n        'iml',\n        'xquery',\n        'tmLanguage',\n        'manifest',\n        'project'\n      ],\n      fileNames: ['.htaccess']\n    },\n    {\n      name: 'image',\n      fileExtensions: [\n        'png',\n        'jpeg',\n        'jpg',\n        'gif',\n        'svg',\n        'ico',\n        'tif',\n        'tiff',\n        'psd',\n        'psb',\n        'ami',\n        'apx',\n        'bmp',\n        'bpg',\n        'brk',\n        'cur',\n        'dds',\n        'dng',\n        'exr',\n        'fpx',\n        'gbr',\n        'img',\n        'jbig2',\n        'jb2',\n        'jng',\n        'jxr',\n        'pbm',\n        'pgf',\n        'pic',\n        'raw',\n        'webp',\n        'eps'\n      ]\n    },\n    { name: 'tex', fileExtensions: ['tex', 'cls', 'sty'] },\n    {\n      name: 'powerpoint',\n      fileExtensions: [\n        'pptx',\n        'ppt',\n        'pptm',\n        'potx',\n        'potm',\n        'ppsx',\n        'ppsm',\n        'pps',\n        'ppam',\n        'ppa'\n      ]\n    },\n    {\n      name: 'video',\n      fileExtensions: [\n        'webm',\n        'mkv',\n        'flv',\n        'vob',\n        'ogv',\n        'ogg',\n        'gifv',\n        'avi',\n        'mov',\n        'qt',\n        'wmv',\n        'yuv',\n        'rm',\n        'rmvb',\n        'mp4',\n        'm4v',\n        'mpg',\n        'mp2',\n        'mpeg',\n        'mpe',\n        'mpv',\n        'm2v'\n      ]\n    },\n    { name: 'audio', fileExtensions: ['mp3', 'flac', 'm4a', 'wma', 'aiff'] },\n    { name: 'document', fileExtensions: ['txt'] }\n  ]\n};\n\nexport const getFileIconName = (filename: string) => {\n  filename = filename.toLowerCase();\n  if (!filename || !filename.includes('.')) {\n    return fileIcons.defaultIcon.name;\n  }\n  const ext = getFileExtension(filename);\n  const matchesExt = fileIcons.icons.filter(\n    x => !!x.fileExtensions && !!x.fileExtensions.filter(y => y === ext).length\n  );\n  const matchesFilename = fileIcons.icons.filter(\n    x => !!x.fileNames && !!x.fileNames.filter(y => y === filename).length\n  );\n  if (!!matchesFilename.length) {\n    return matchesFilename[0].name;\n  } else if (!!matchesExt.length) {\n    return matchesExt[0].name;\n  }\n\n  return fileIcons.defaultIcon.name;\n};\n\nexport const isFileImage = (filename: string) =>\n  getFileIconName(filename) === 'image';\n\nexport const getFileExtension = (filename: string) => filename.split('.').pop();\n\nexport const getFileName = (filename: string) =>\n  filename.split('.').slice(-2, -1)[0];\n\nexport const getFileIcon = (filename: string) => {\n  return '/assets/fileicons/' + getFileIconName(filename) + '.svg';\n};\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { FileSystemProvider, CoreTypes } from '../../../core-types';\nimport { promiseDelay } from '../../utils/delayer';\nimport { LoggerService } from '../../services/logging/logger.service';\nimport { getFileIconName } from '../file-upload/form-file-firebase/file-icon.helper';\nimport { FileManagerConfig } from '../../configuration/client-configuration';\nimport { FileDetailActionDefinition } from './FileDetailActionDefinition';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'ngx-filemanager-file-details',\n  template: `\n    <div class=\"details-container ml-5\">\n      <div *ngIf=\"!hasInput\" class=\"none-selected\">\n        <h2>No item selected ...</h2>\n      </div>\n      <div *ngIf=\"hasInput\">\n        <mat-toolbar color=\"primary\">\n          <mat-toolbar-row class=\"title-row\">\n            <h2 *ngIf=\"isFile\">File Details</h2>\n            <h2 *ngIf=\"!isFile\">Directory Details</h2>\n          </mat-toolbar-row>\n          <mat-toolbar-row class=\"action-row\" *ngFor=\"let action of actions\">\n            <button\n              mat-raised-button\n              [matTooltip]=\"action.toolTip\"\n              [color]=\"action.color\"\n              (click)=\"action.onClick(file)\"\n              [disabled]=\"action.$disabled | async\"\n            >\n              <mat-icon>{{ action.icon }}</mat-icon>\n              <span>{{ action.label }}</span>\n            </button>\n          </mat-toolbar-row>\n        </mat-toolbar>\n        <span class=\"flex-row space-between align-top mt-5\">\n          <div>\n            <h5>Name</h5>\n            <h6 class=\"filename\">{{ file.name }}</h6>\n          </div>\n        </span>\n        <h5 class=\"mt-5\">Size</h5>\n        <h6 *ngIf=\"isFile\">{{ file.size | fileSize }}</h6>\n        <h6 *ngIf=\"!isFile&&config.folderSizePath\">{{ getFolderSize(file) | fileSize }}</h6>\n        <h5 class=\"mt-5\">Date</h5>\n        <h6>{{ file.date | date: 'short' }}</h6>\n        <span class=\"flex-row space-between align-top mt-5\">\n          <div>\n            <h5>Permissions</h5>\n            <div class=\"mb-10\">\n              <div *ngIf=\"readers?.length\">\n                <h6>Who can see this</h6>\n                <mat-chip-list>\n                  <mat-chip *ngFor=\"let entity of readers\">\n                    <mat-icon>people</mat-icon>\n                    <span>{{ entity }}</span>\n                  </mat-chip>\n                </mat-chip-list>\n              </div>\n              <div *ngIf=\"config?.showWriters && writers?.length\">\n                <h6>Who can edit this</h6>\n                <mat-chip-list>\n                  <mat-chip *ngFor=\"let entity of writers\">\n                    <mat-icon>people</mat-icon>\n                    <span>{{ entity }}</span>\n                  </mat-chip>\n                </mat-chip-list>\n              </div>\n              <div *ngIf=\"config?.showOthers && others\">\n                <h6>Everyone else can</h6>\n                <mat-chip-list>\n                  <mat-chip>\n                    {{ others }}\n                  </mat-chip>\n                </mat-chip-list>\n              </div>\n            </div>\n          </div>\n        </span>\n        <h5 class=\"mt-5\">Full Path</h5>\n        <h6>{{ file.fullPath }}</h6>\n        <h5 class=\"mt-5\">Type</h5>\n        <h6 *ngIf=\"!isFile\">Directory</h6>\n        <h6 *ngIf=\"isFile\" class=\"capitalize \">\n          {{ getFileType(file.name) }}\n        </h6>\n        <div *ngIf=\"isFile\" class=\"flex-row space-between align-top mt-5\">\n          <div>\n            <h5>Download</h5>\n            <div *ngIf=\"isImage\" class=\"preview\">\n              <i>Image Preview</i>\n              <div\n                class=\"has-pointer\"\n                (click)=\"this.clickedDownload.emit(file)\"\n              >\n                <img *ngIf=\"imageUrl\" [src]=\"imageUrl\" />\n              </div>\n            </div>\n            <div *ngIf=\"!isImage\">\n              <h6 class=\"no-preview-text\">\n                No preview available\n              </h6>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [\n    `\n      .filename {\n        padding-right: 10px;\n      }\n      .none-selected {\n        color: grey;\n        text-align: center;\n        width: 100%;\n        margin-top: 100px;\n      }\n      .mb-10 {\n        margin-bottom: 10px;\n      }\n      .mt-5 {\n        margin-top: 10px;\n      }\n      .ml-5 {\n        margin-left: 5px;\n      }\n      .no-preview-text {\n        color: grey;\n        font-decoration: italic;\n      }\n      h5 {\n        margin: 0px;\n        color: #616161;\n        font-weight: normal;\n      }\n      h6 {\n        margin: 0px;\n        font-size: 1em;\n        overflow-wrap: break-word;\n        font-weight: bold;\n        margin-bottom: 5px;\n        margin-top: 2px;\n      }\n      img {\n        max-width: 100%;\n        max-height: 400px;\n      }\n      .preview {\n        opacity: 1;\n        transition: opacity 1s;\n      }\n      .title-row {\n        height: 45px;\n        padding-left: 8px;\n      }\n      .action-row {\n        height: 45px;\n        padding-left: 8px;\n      }\n      .action-row:last-child {\n        height: 48px;\n        padding-bottom: 4px;\n      }\n    `\n  ],\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class FileDetailsComponent {\n  imageUrl: string;\n\n  _file: CoreTypes.ResFile;\n  @Input()\n  set file(newFile) {\n    this._file = newFile;\n    if (!newFile) {\n      return;\n    }\n    this.logger.info('file-details: set file', { newFile });\n    this.isFile = this.file.type === 'file';\n    this.isImage = getFileIconName(this.file.name) === 'image';\n    this.setImageUrl().catch(e => console.error(e));\n    this.setPermissions();\n  }\n  get file() {\n    return this._file;\n  }\n  @Input()\n  fileSystem: FileSystemProvider;\n  @Input()\n  config: FileManagerConfig;\n  @Input()\n  actions: FileDetailActionDefinition[];\n  @Output()\n  clickedDownload = new EventEmitter<CoreTypes.ResFile>();\n\n  others: string;\n  writers: CoreTypes.FilePermissionEntity[];\n  readers: CoreTypes.FilePermissionEntity[];\n\n  isFile: boolean;\n  isImage: boolean;\n\n  constructor(private logger: LoggerService) {}\n\n  getFileType(fileName: string) {\n    return getFileIconName(fileName);\n  }\n\n  get hasInput() {\n    return !!this.file;\n  }\n\n  async setImageUrl() {\n    this.imageUrl = null;\n    try {\n      await promiseDelay(300);\n      if (!this.hasInput || !this.isFile) {\n        return;\n      }\n      this.imageUrl = await this.fileSystem.CreateDownloadLink(this.file);\n    } catch (error) {\n      this.logger.error('Error setting ImageUrl', { error }, error);\n    }\n  }\n\n  setPermissions() {\n    if (!this._file || !this._file.permissions) {\n      return;\n    }\n    try {\n      const permissions = this._file.permissions;\n      this.readers = permissions.readers;\n      this.writers = permissions.writers;\n      this.others = permissions.others;\n    } catch (error) {\n      this.logger.error('file-details: setPermissions', {\n        error,\n        file: this._file\n      });\n    }\n  }\n\n  getFolderSize(folder: CoreTypes.ResFile) {\n    if(folder.metaData) {\n      let path = this.config.folderSizePath\n      return path.split('.').reduce(function(p,prop) { return p[prop] }, folder);\n    }\n    return folder.size\n  }\n}\n","export function ConvertToTitleCase(input: string): string {\n  const capitalsWithSpaces = input.replace(/([A-Z])/g, ' $1').trim();\n  const underscoresToSpaces = capitalsWithSpaces.replace(/_/g, ' ');\n  return underscoresToSpaces\n    .split(' ')\n    .map(p => p.charAt(0).toUpperCase() + p.substr(1).toLowerCase())\n    .join(' ');\n}\n","import { ControlValueAccessor, FormControl, Validator } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { OnDestroy, OnInit, Input, Directive } from '@angular/core';\nimport { takeUntil, auditTime } from 'rxjs/operators';\nimport { ConvertToTitleCase } from '../../../utils/case-helper';\nimport {v4 as uuidv4 } from 'uuid';\n\n@Directive()\nexport class FormBase<T>\n  implements OnInit, OnDestroy, ControlValueAccessor, Validator {\n  internalControl: FormControl = new FormControl();\n  autoCompleteObscureName: string;\n  _destroyed = new Subject();\n\n  disabled = false;\n  validationError: string;\n\n  _value: T;\n\n  @Input()\n  formControlName: string;\n  @Input()\n  placeholder: string;\n\n  constructor() {\n    // Garrentee that init and destroy are called\n    // even if ngOnInit() or ngOnDestroy() are overriden\n    const originalOnDestroy = this.ngOnDestroy;\n    this.ngOnDestroy = () => {\n      this.destroy();\n      originalOnDestroy.apply(this);\n    };\n    const originalOnInit = this.ngOnInit;\n    this.ngOnInit = () => {\n      this.init();\n      originalOnInit.apply(this);\n    };\n  }\n\n  ngOnInit() {}\n\n  ngOnDestroy() {}\n\n  init() {\n    this._destroyed.next();\n    this.autoCompleteObscureName = uuidv4();\n    this.internalControl.valueChanges\n      .pipe(takeUntil(this._destroyed))\n      .pipe(auditTime(100))\n      .subscribe(() => {\n        this._value = this.internalControl.value;\n        this.onChange(this._value);\n        this.onTouched();\n        // console.log('form-base-class: valueChanges', {val: this._value});\n      });\n\n    if (!this.placeholder) {\n      const nameParsed = ConvertToTitleCase(this.formControlName + '');\n      this.placeholder = nameParsed;\n    }\n  }\n\n  destroy() {\n    this._destroyed.next();\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(val) {\n    this._value = val;\n    this.internalControl.setValue(val);\n  }\n\n  writeValue(value: any): void {\n    this.value = value;\n  }\n\n  propagateOnChange: any = () => {};\n  registerOnChange(fn: any): void {\n    this.propagateOnChange = fn;\n  }\n\n  onTouched: any = () => {};\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    setTimeout(() => {\n      if (isDisabled) {\n        this.internalControl.disable();\n      } else {\n        this.internalControl.enable();\n      }\n    });\n  }\n\n  public validate(c: FormControl) {\n    const errors = c.errors;\n    const value = c.value;\n    // console.log('form-base-class: validate()', { errors, value });\n    this.internalControl.setValidators(c.validator);\n    return !this.validationError\n      ? null\n      : {\n          validationError: {\n            valid: false\n          }\n        };\n  }\n\n  private onChange(inputValue) {\n    this.validationError = this.CheckValueIsValid();\n    if (this.validationError) {\n      this.propagateOnChange(this.value);\n    } else {\n      this.propagateOnChange(inputValue);\n    }\n  }\n\n  CheckValueIsValid(): string {\n    return null;\n  }\n}\n","import {\n  Component,\n  forwardRef,\n  OnInit,\n  OnDestroy,\n  Input,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport { FormArrayFileObject } from './FormArrayFileObject';\nimport * as firebase from 'firebase/app';\nimport 'firebase/storage';\nimport { Subject, timer } from 'rxjs';\nimport { take, takeUntil } from 'rxjs/operators';\nimport { getFileIcon, isFileImage } from './file-icon.helper';\nimport { FormBase } from './form-base-class';\nimport { TrimSlashes } from '../../../utils/path-helpers';\nimport { NotificationService } from '../../../services/pure/notification.service';\n\nexport interface FormFilesConfiguration {\n  directory: string;\n  bucketname?: string;\n  firebaseConfig: {};\n  maxFiles?: number;\n  imageCompressionQuality?: number;\n  imageCompressionMaxSize?: number;\n  acceptedFiles?: 'image/*,application/*' | 'image/*';\n}\n\n@Component({\n  // tslint:disable-next-line: component-selector\n  selector: 'form-file-firebase',\n  template: `\n    <div>\n      <label class=\"custom-file-upload\">\n        <input\n          *ngIf=\"isMultiple\"\n          class=\"hidden\"\n          type=\"file\"\n          multiple\n          [disabled]=\"disabled || maxReached\"\n          (change)=\"onFileChange($event)\"\n        />\n        <input\n          *ngIf=\"!isMultiple\"\n          class=\"hidden\"\n          type=\"file\"\n          [disabled]=\"disabled || maxReached\"\n          (change)=\"onFileChange($event)\"\n        />\n        {{ placeholder }}\n        <div class=\"max-files\" *ngIf=\"maxReached && !disabled\">\n          Max Uploaded - Limit of {{ config.maxFiles }} file(s) reached. Remove\n          files to change uploads\n        </div>\n      </label>\n      <app-uploaded-files-list\n        [disabled]=\"disabled\"\n        [uploadedFiles]=\"this.value\"\n        (clickRemoveTag)=\"this.clickRemoveTag($event)\"\n      >\n      </app-uploaded-files-list>\n    </div>\n  `,\n  styles: [\n    `\n      .custom-file-upload {\n        border: 4px dashed #ccc;\n        display: inline-block;\n        padding: 35px 0px;\n        cursor: pointer;\n        width: calc(100% - 8px);\n        text-align: center;\n        font-size: 1.5em;\n        color: #777;\n      }\n      .hidden {\n        display: none;\n      }\n      .max-files {\n        font-size: 0.9em;\n        color: orange;\n        font-style: italic;\n      }\n    `\n  ],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FormFileFirebaseComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => FormFileFirebaseComponent),\n      multi: true\n    }\n  ]\n})\nexport class FormFileFirebaseComponent extends FormBase<FormArrayFileObject[]>\n  implements OnInit, OnDestroy {\n  @Input()\n  placeholder = 'upload here';\n  @Input()\n  config: FormFilesConfiguration = {} as any;\n  // tslint:disable-next-line: no-output-on-prefix\n  @Output()\n  uploadStatusChanged = new EventEmitter<boolean>();\n\n  destroyed = new Subject();\n  storage: firebase.default.storage.Storage;\n\n  constructor(public ns: NotificationService) {\n    super();\n  }\n\n  ngOnInit() {\n    let app;\n    if (firebase.default.apps.length) {\n      app = firebase.default.apps[0];\n    } else {\n      app = firebase.default.initializeApp(this.config.firebaseConfig);\n    }\n    this.storage = app.storage(this.currentBucketName());\n    timer(0, 1000)\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(() => {\n        this.checkAllUploadsAreDone();\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n  }\n\n  checkAllUploadsAreDone() {\n    const allFiles = this.value;\n    const completeArray = allFiles\n      .filter(f => !!f)\n      .filter(f => !!f.value)\n      .filter(f => !!f.value.props)\n      .map(f => f.value.props.completed);\n\n    const haveAllFilesComplete = completeArray.reduce(\n      (previous, currentComplete) => previous && currentComplete,\n      true\n    );\n    const isStillUploading = !haveAllFilesComplete;\n    this.uploadStatusChanged.emit(isStillUploading);\n  }\n\n  get isMultiple() {\n    return this.config && this.config.maxFiles !== 1;\n  }\n\n  get maxReached() {\n    return (\n      this.config &&\n      this.config.maxFiles &&\n      this.value &&\n      this.config.maxFiles === this.value.length\n    );\n  }\n\n  private currentBucketName() {\n    return (\n      this.config.bucketname ||\n      // tslint:disable-next-line: no-string-literal\n      this.config.firebaseConfig['storageBucket']\n    );\n  }\n\n  async clickRemoveTag(fileObject: FormArrayFileObject) {\n    this.ensureValueIsArray();\n    this.value = this.value.filter(f => f.id !== fileObject.id);\n    if (fileObject.bucket_path) {\n      try {\n        await this.storage.refFromURL(fileObject.bucket_path).delete();\n        console.log('form-files: clickRemoveTag() file deleted from storage', {\n          fileObject\n        });\n      } catch (error) {\n        console.log(\n          'form-files: clickRemoveTag() problem deleting file',\n          error\n        );\n      }\n    }\n  }\n\n  onFileChange(event) {\n    if (event.target.files && event.target.files.length) {\n      const filesList = event.target.files;\n      const fileArray = Array.from(filesList);\n      fileArray.map((file: File) => this.beginUploadTask(file));\n    }\n  }\n\n  async beginUploadTask(file: File) {\n    const bucketPath = 'gs://' + this.currentBucketName();\n    const uniqueFileName = file.name;\n    const originalFileName = file.name;\n    const dir = this.config.directory;\n    const dirPath = `${TrimSlashes(bucketPath)}/${TrimSlashes(dir)}`;\n    const fullPath = `${TrimSlashes(dirPath)}/${uniqueFileName}`;\n    console.log('beginUploadTask()', { fileData: file, bucketPath, fullPath });\n    let fileParsed;\n    if (file.type === 'image/*') {\n      fileParsed = await this.parseAndCompress(file);\n    } else {\n      fileParsed = file;\n    }\n    await this.addFile(uniqueFileName, originalFileName, fullPath);\n    const uploadTask = this.storage.refFromURL(fullPath).put(fileParsed);\n    uploadTask.on(firebase.default.storage.TaskEvent.STATE_CHANGED, {\n      next: snap => this.onNext(snap, fullPath),\n      error: error => this.onError(error),\n      complete: () =>\n        this.onComplete(fullPath, uniqueFileName, originalFileName)\n    });\n\n    this.destroyed.pipe(take(1)).subscribe(() => {\n      uploadTask.cancel();\n    });\n  }\n\n  async parseAndCompress(file) {\n    if (\n      !this.config.imageCompressionMaxSize &&\n      !this.config.imageCompressionQuality\n    ) {\n      return file;\n    }\n    const maxWidth = this.config.imageCompressionMaxSize || 1800;\n    const maxQuality = this.config.imageCompressionQuality || 0.6;\n    const dataURL = await blobToDataURL(file);\n    const newDataURL = await downscaleImage(\n      dataURL,\n      maxWidth,\n      maxQuality,\n      'image/jpeg'\n    );\n    const oldKb = this.getFileSizeKiloBytes(dataURL);\n    const newKb = this.getFileSizeKiloBytes(newDataURL);\n    const fileNew = dataURItoBlob(newDataURL) as File;\n    console.log(`app-tags-files.component: optimized image...\n  --> old=${oldKb} kb\n  --> new=${newKb} kb`);\n    return fileNew;\n  }\n\n  getFileSizeKiloBytes(dataURL) {\n    const head = 'data:image/*;base64,';\n    const fileSizeBytes = Math.round(((dataURL.length - head.length) * 3) / 4);\n    const fileSizeKiloBytes = (fileSizeBytes / 1024).toFixed(0);\n    return fileSizeKiloBytes;\n  }\n\n  async onNext(\n    snapshot: firebase.default.storage.UploadTaskSnapshot,\n    fullPath: string\n  ) {\n    this.ensureValueIsArray();\n    switch (snapshot.state) {\n      case firebase.default.storage.TaskState.RUNNING: // or 'running'\n        const file = this.value.find(f => f.bucket_path === fullPath);\n        const progress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload is running', {\n          file,\n          fullPath,\n          progress,\n          snapshot\n        });\n        file.value.props.progress = progress;\n        break;\n    }\n  }\n\n  onError(error) {\n    this.ns.notify('storage/unauthorized', 'Error Uploading');\n    console.error('onError(error)', { error }, error);\n  }\n\n  async onComplete(fullPath, uniqueFileName, originalFileName) {\n    console.log('onComplete()', {});\n    const ref = this.storage.refFromURL(fullPath);\n    const url = await ref.getDownloadURL();\n    const isImage = isFileImage(originalFileName);\n\n    this.ensureValueIsArray();\n    const file = this.value.find(f => f.id === uniqueFileName);\n    file.id = url;\n    if (isImage) {\n      file.imageurl = url;\n    }\n    file.value.props.completed = true;\n    this.writeValue(this.value);\n  }\n\n  addFile(uniqueFileName: string, originalFileName: string, fullPath: string) {\n    const fileIcon = getFileIcon(originalFileName);\n    const newFile: FormArrayFileObject = {\n      id: uniqueFileName,\n      fileicon: fileIcon,\n      imageurl: null,\n      bucket_path: fullPath,\n      value: {\n        name: originalFileName,\n        props: {\n          thumb: null,\n          fileicon: fileIcon,\n          progress: 0,\n          completed: false\n        }\n      }\n    };\n    this.ensureValueIsArray();\n    this.value.push(newFile);\n  }\n\n  ensureValueIsArray() {\n    if (!Array.isArray(this.value)) {\n      this.writeValue([]);\n    }\n  }\n}\n\n// **blob to dataURL**\nasync function blobToDataURL(blob): Promise<string> {\n  const reader = new FileReader();\n  return new Promise<string>((resolve, reject) => {\n    reader.onload = function (e: any) {\n      resolve(e.target.result as string);\n    };\n    reader.onerror = function (error: any) {\n      reject(error);\n    };\n    reader.readAsDataURL(blob);\n  });\n}\n\n// Dataurl to blob\nexport function dataURItoBlob(dataURI) {\n  // convert base64 to raw binary data held in a string\n  // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n  const byteString = atob(dataURI.split(',')[1]);\n\n  // separate out the mime component\n  const mimeString = dataURI\n    .split(',')[0]\n    .split(':')[1]\n    .split(';')[0];\n\n  // write the bytes of the string to an ArrayBuffer\n  const ab = new ArrayBuffer(byteString.length);\n\n  // create a view into the buffer\n  const ia = new Uint8Array(ab);\n\n  // set the bytes of the buffer to the correct values\n  for (let i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  // write the ArrayBuffer to a blob, and you're done\n  const blob = new Blob([ab], { type: mimeString });\n  return blob;\n}\n\n// Take an image URL, downscale it to the given width, and return a new image URL.\nasync function downscaleImage(\n  dataUrl: string,\n  newWidth: number,\n  imageQuality: number,\n  imageType: string,\n  debug?: boolean\n) {\n  // Provide default values\n  imageType = imageType || 'image/jpeg';\n  imageQuality = imageQuality || 0.7;\n\n  // Create a temporary image so that we can compute the height of the downscaled image.\n  const image = new Image();\n  image.src = dataUrl;\n  await new Promise(resolve => {\n    image.onload = () => {\n      resolve('');\n    };\n  });\n  const oldWidth = image.width;\n  const oldHeight = image.height;\n  const newHeight = Math.floor((oldHeight / oldWidth) * newWidth);\n\n  // Create a temporary canvas to draw the downscaled image on.\n  const canvas = document.createElement('canvas');\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n\n  // Draw the downscaled image on the canvas and return the new data URL.\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(image, 0, 0, newWidth, newHeight);\n  const newDataUrl = canvas.toDataURL(imageType, imageQuality);\n  if (debug) {\n    console.log('quill.imageCompressor: downscaling image...', {\n      args: {\n        dataUrl,\n        newWidth,\n        imageType,\n        imageQuality\n      },\n      image,\n      oldWidth,\n      oldHeight,\n      newHeight,\n      canvas,\n      ctx,\n      newDataUrl\n    });\n  }\n  return newDataUrl;\n}\n","import { EventEmitter, Component, Input, Output } from '@angular/core';\nimport { FormArrayFileObject } from './FormArrayFileObject';\n\n@Component({\n  selector: 'app-uploaded-files-list',\n  template: `\n    <p *ngIf=\"uploadedFiles?.length\">Uploaded files:</p>\n    <div>\n      <div *ngFor=\"let file of uploadedFiles\">\n        <div class=\"full-width flex-h\">\n          <mat-icon id=\"i-done\" *ngIf=\"!disabled && isDone(file)\"\n            >done</mat-icon\n          >\n          <img class=\"file-icon\" image [src]=\"file['fileicon']\" />\n          <a class=\"full-width flex-h has-ellipsis\" [href]=\"file.id\" target=\"_blank\">\n            <span class=\"has-ellipsis\">{{ file.value.name }}</span>\n            <mat-icon class=\"i-open\">open_in_new</mat-icon>\n            <img\n              *ngIf=\"file['imageurl']\"\n              class=\"file-thumb\"\n              image\n              [src]=\"file['imageurl']\"\n            />\n          </a>\n          <mat-icon\n            *ngIf=\"!disabled\"\n            class=\"has-pointer\"\n            (click)=\"this.clickRemoveTag.emit(file)\"\n            >cancel</mat-icon\n          >\n        </div>\n        <div class=\"full-width\">\n          <mat-progress-bar\n            class=\"progress\"\n            mode=\"determinate\"\n            [value]=\"getProgress(file)\"\n          ></mat-progress-bar>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [\n    `\n      .full-width {\n        width: 100%;\n      }\n      .flex-h {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n      }\n      .has-pointer {\n        cursor: pointer;\n      }\n      .file-link {\n        display: flex;\n        align-items: center;\n      }\n      .file-thumb,\n      .file-icon {\n        margin: 0px 10px;\n        height: 30px;\n      }\n      .file-thumb {\n        background-color: #ddd;\n      }\n      .i-open {\n        font-size: 1em;\n      }\n      .has-ellipsis {\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n      }\n    `\n  ]\n})\nexport class FormFileUploadedFileListComponent {\n  @Input()\n  disabled: boolean;\n  @Input()\n  uploadedFiles: FormArrayFileObject[] = [];\n  @Output()\n  clickRemoveTag = new EventEmitter<FormArrayFileObject>();\n\n  getProgress(file: FormArrayFileObject) {\n    const isDone = this.isDone(file);\n    if (isDone) {\n      return 100;\n    }\n    if (file && file.value && file.value.props) {\n      const p = file.value.props.progress;\n      return p * 0.95; // 95% until download completed\n    }\n    return 100;\n  }\n\n  isDone(file: FormArrayFileObject): boolean {\n    if (file && file.value && file.value.props) {\n      const c = file.value.props.completed;\n      return c;\n    }\n    return false;\n  }\n}\n","import { FormFileFirebaseComponent } from './form-file-firebase/form-file-firebase.component';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { FormFileUploadedFileListComponent } from './form-file-firebase/form-file-uploader-list.component';\nimport { CommonModule } from '@angular/common';\n\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatIconModule } from '@angular/material/icon';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatProgressBarModule,\n    MatInputModule,\n    MatIconModule\n  ],\n  exports: [FormFileFirebaseComponent],\n  declarations: [FormFileFirebaseComponent, FormFileUploadedFileListComponent],\n  providers: []\n})\nexport class FormFileFirebaseModule {}\n","import { HttpClient } from '@angular/common/http';\nimport { take } from 'rxjs/operators';\nimport { LoggerService } from '../logging/logger.service';\n\nexport class FileSystemRequestBuilder {\n  private options = {\n    headers: {}\n  };\n  private body: {};\n  constructor(\n    private http: HttpClient,\n    private url: string,\n    private logger: LoggerService,\n    private LOG_ID: string\n  ) {}\n  AddBody(body) {\n    this.body = {\n      ...this.body,\n      ...body\n    };\n    return this;\n  }\n  PatchBody<T>(body: Partial<T>) {\n    const partBody = body as any;\n    this.body = {\n      ...this.body,\n      ...partBody\n    };\n    return this;\n  }\n  PatchHeaders(headers: {}) {\n    this.options.headers = {\n      ...this.options.headers,\n      ...headers\n    };\n    return this;\n  }\n  MakeJson() {\n    this.options['responseType'] = 'json';\n    this.options.headers['Content-Type'] = 'application/json';\n  }\n  private makeRequestKey() {\n    const key = this.url + JSON.stringify(this.body || {});\n    return key;\n  }\n\n  async POST() {\n    const key = this.makeRequestKey();\n    try {\n      this.logger.info(this.LOG_ID + ' FileSystemRequestBuilder', {\n        url: this.url,\n        body: this.body,\n        options: this.options\n      });\n      const response = await this.http\n        .post(this.url, this.body, this.options)\n        .pipe(take(1))\n        .toPromise();\n      return response as any;\n    } catch (apiErrorResponse) {\n      console.error('API Post Error', { apiErrorResponse });\n      if (apiErrorResponse.error && apiErrorResponse.error.errorDetail) {\n        const detail = apiErrorResponse.error.errorDetail;\n        throw new Error('API Response: ' + detail);\n      }\n      throw new Error(\n        'API request failed, status:' + apiErrorResponse.statusText\n      );\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { CoreTypes, FileSystemProvider } from '../../../core-types';\nimport { LoggerService } from '../logging/logger.service';\nimport { FileSystemRequestBuilder } from './server-filesystem-request';\nimport { EnsureNoTrailingSlash } from '../../utils/path-helpers';\n\n@Injectable()\nexport class ServerFilesystemProviderService implements FileSystemProvider {\n  private bucketname: string;\n  private apiEndpoint: string;\n  private isAdmin: boolean;\n\n  private LOG_ID = Math.random().toString(32).slice(2, 10);\n\n  constructor(private http: HttpClient, private logger: LoggerService) { }\n\n  private makeAPIRequest(action: CoreTypes.FileManagerAction) {\n    this.logger.info('makeAPIRequest', { action, context: this });\n\n    return new FileSystemRequestBuilder(\n      this.http,\n      this.apiEndpoint,\n      this.logger,\n      this.LOG_ID\n    ).AddBody({\n      action: action,\n      bucketname: this.bucketname,\n      isAdmin: this.isAdmin,\n    });\n  }\n\n  Initialize(config: {\n    bucketname: string;\n    apiEndpoint: string;\n    isAdmin: boolean;\n  }) {\n    this.bucketname = config.bucketname;\n    this.isAdmin = config.isAdmin;\n    this.apiEndpoint = EnsureNoTrailingSlash(config.apiEndpoint);\n  }\n\n  List(path: string): Promise<CoreTypes.ResBodyList> {\n    return this.makeAPIRequest('list')\n      .PatchBody<CoreTypes.ReqBodyList>({\n        path: path,\n      }).PatchHeaders({\n        Authorization: window.localStorage.getItem('token')\n      })\n      .POST();\n  }\n\n  CreateFolder(\n    newPath: string,\n    disableNoClobber?: boolean\n  ): Promise<CoreTypes.ResBodyCreateFolder> {\n    return this.makeAPIRequest('createFolder')\n      .PatchBody<CoreTypes.ReqBodyCreateFolder>({\n        newPath: newPath,\n      })\n      .POST();\n  }\n\n  Copy(\n    singleFileName: string,\n    newPath: string\n  ): Promise<CoreTypes.ResBodyCopy> {\n    return this.makeAPIRequest('copy')\n      .PatchBody<CoreTypes.ReqBodyCopy>({\n        singleFileName: singleFileName,\n        newPath: newPath,\n      })\n      .POST();\n  }\n\n  Move(item: string, newPath: string): Promise<CoreTypes.ResBodyMove> {\n    return this.makeAPIRequest('move')\n      .PatchBody<CoreTypes.ReqBodyMove>({\n        items: [item],\n        newPath: newPath,\n      })\n      .POST();\n  }\n\n  Rename(item: string, newItemPath: string): Promise<CoreTypes.ResBodyRename> {\n    return this.makeAPIRequest('rename')\n      .PatchBody<CoreTypes.ReqBodyRename>({\n        item: item,\n        newItemPath: newItemPath,\n      })\n      .POST();\n  }\n\n  Edit(item: string, content: string): Promise<CoreTypes.ResBodyEdit> {\n    return this.makeAPIRequest('edit')\n      .PatchBody<CoreTypes.ReqBodyEdit>({\n        item: item,\n        content: content,\n      })\n      .POST();\n  }\n\n  Getcontent(item: string): Promise<CoreTypes.ResBodyGetContent> {\n    return this.makeAPIRequest('getContent')\n      .PatchBody<CoreTypes.ReqBodyEdit>({\n        item: item,\n      })\n      .POST();\n  }\n\n  SetPermissions(\n    item: string,\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity,\n    recursive?: boolean\n  ): Promise<CoreTypes.ResBodySetPermissions> {\n    return this.makeAPIRequest('changePermissions')\n      .PatchBody<CoreTypes.ReqBodySetPermissions>({\n        items: [item],\n        role: role,\n        entity: entity,\n        recursive: recursive,\n      })\n      .POST();\n  }\n\n  MoveMultiple(\n    items: string[],\n    newPath: string\n  ): Promise<CoreTypes.ResBodyMove> {\n    return this.makeAPIRequest('move')\n      .PatchBody<CoreTypes.ReqBodyMove>({\n        items: items,\n        newPath: newPath,\n      })\n      .POST();\n  }\n\n  CopyMultiple(\n    items: string[],\n    newPath: string\n  ): Promise<CoreTypes.ResBodyCopy> {\n    return this.makeAPIRequest('copy')\n      .PatchBody<CoreTypes.ReqBodyCopy>({\n        items: items,\n        newPath: newPath,\n      })\n      .POST();\n  }\n\n  SetPermissionsMultiple(\n    items: string[],\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity,\n    recursive?: boolean\n  ): Promise<CoreTypes.ResBodySetPermissions> {\n    return this.makeAPIRequest('changePermissions')\n      .PatchBody<CoreTypes.ReqBodySetPermissions>({\n        items: items,\n        role: role,\n        entity: entity,\n        recursive: recursive,\n      })\n      .POST();\n  }\n\n  SetPermissionsObjectMultiple(\n    items: string[],\n    permissionsObj: CoreTypes.FilePermissionsObject,\n    recursive?: boolean\n  ): Promise<CoreTypes.ResBodySetPermissions> {\n    return this.makeAPIRequest('changePermissionsObject')\n      .PatchBody<CoreTypes.ReqBodySetPermissionsObject>({\n        items: items,\n        permissionsObj: permissionsObj,\n        recursive: recursive,\n      })\n      .POST();\n  }\n\n  Remove(items: string[]): Promise<CoreTypes.ResBodyRemove> {\n    return this.makeAPIRequest('remove')\n      .PatchBody<CoreTypes.ReqBodyRemove>({\n        items: items,\n      })\n      .POST();\n  }\n\n  GetSingle(item: string): Promise<CoreTypes.ResBodyGetSingle> {\n    return this.makeAPIRequest('getSingle')\n      .PatchBody<CoreTypes.ReqBodyGetSingle>({\n        item: item,\n      })\n      .POST();\n  }\n\n  GetUploadApiUrl(currentPath: string): string {\n    const uploadApiEndpoint =\n      this.apiEndpoint +\n      '/upload?' +\n      'bucketname=' +\n      this.bucketname +\n      '&directoryPath=' +\n      currentPath;\n    return uploadApiEndpoint;\n  }\n\n  CloneProvider(): FileSystemProvider {\n    return new ServerFilesystemProviderService(this.http, this.logger);\n  }\n\n  async CreateDownloadLink(file: CoreTypes.ResFile): Promise<string> {\n    try {\n      const response: CoreTypes.ResBodyGetSingle = await this.makeAPIRequest(\n        'getSingle'\n      )\n        .PatchBody<CoreTypes.ReqBodyGetSingle>({\n          item: file.fullPath,\n        })\n        .POST();\n      const url = response.result.url;\n      return url;\n    } catch (error) {\n      throw new Error(error.message);\n    }\n  }\n\n  async Upload(item: string): Promise<boolean> {\n    return null;\n  }\n}\n","import { Component, Input } from '@angular/core';\n\n// tslint:disable:component-selector\n@Component({\n  selector: 'base-dialog',\n  template: `\n    <div class=\"dialog-wrapper\">\n      <div class=\"header sans-serif flex-col align-center\">\n        <ng-container *ngTemplateOutlet=\"header\"> </ng-container>\n      </div>\n      <div class=\"body sans-serif flex-col align-center\">\n        <ng-container *ngTemplateOutlet=\"body\"> </ng-container>\n      </div>\n      <div class=\"actions sans-serif flex-col align-center\">\n        <ng-container *ngTemplateOutlet=\"actions\"> </ng-container>\n      </div>\n    </div>\n  `,\n  styles: [\n    `\n      .dialog-wrapper {\n        max-height: 80vh;\n        min-width: 400px;\n      }\n      .header {\n      }\n      .body {\n        overflow-y: auto;\n        max-height: 60vh;\n      }\n      .actions {\n        max-height: 200px;\n      }\n    `\n  ],\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class BaseDialogComponent {\n  @Input()\n  header: any;\n  @Input()\n  body: any;\n  @Input()\n  actions: any;\n}\n","import { Component, Inject, OnDestroy } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormControl } from '@angular/forms';\nimport { Observable, Subject } from 'rxjs';\nimport {\n  FileManagerConfig,\n  NameUid\n} from '../../configuration/client-configuration';\nimport { CoreTypes } from '../../../core-types';\nimport { LoggerService } from '../../services/logging/logger.service';\n\nexport interface PermissionsDialogInterface {\n  files: CoreTypes.ResFile[];\n  config: FileManagerConfig;\n}\nexport interface PermissionsDialogResponseInterface {\n  role: CoreTypes.PermissionsRole;\n  entity: CoreTypes.FilePermissionEntity;\n  files: CoreTypes.ResFile[];\n}\n\n@Component({\n  template: `\n    <base-dialog\n      [header]=\"headerTemplate\"\n      [body]=\"bodyTemplate\"\n      [actions]=\"actionsTemplate\"\n    >\n      <ng-template #headerTemplate>\n        <h2>Set Permissions</h2>\n      </ng-template>\n      <ng-template #bodyTemplate>\n        <h5>Selected Items</h5>\n        <ol>\n          <li *ngFor=\"let file of items\">\n            {{ file.name }}\n          </li>\n        </ol>\n\n        <mat-form-field class=\"full-width\">\n          <mat-select\n            matInput\n            [formControl]=\"entityTypeControl\"\n            placeholder=\"Type\"\n          >\n            <mat-option\n              *ngFor=\"let option of entityTypeOptions\"\n              [value]=\"option\"\n            >\n              {{ option }}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n\n        <mat-form-field class=\"full-width\" *ngIf=\"HasSelectedUser\">\n          <mat-select\n            matInput\n            [formControl]=\"entityControl\"\n            [placeholder]=\"EntityControlLabel\"\n          >\n            <mat-option *ngFor=\"let entity of $users | async\" [value]=\"entity\">\n              {{ entity.name }}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n\n        <mat-form-field class=\"full-width\" *ngIf=\"!HasSelectedUser\">\n          <mat-select\n            matInput\n            [formControl]=\"entityControl\"\n            [placeholder]=\"EntityControlLabel\"\n          >\n            <mat-option *ngFor=\"let entity of $groups | async\" [value]=\"entity\">\n              {{ entity.name }}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n\n        <mat-form-field class=\"full-width\">\n          <mat-select\n            matInput\n            [formControl]=\"roleControl\"\n            placeholder=\"Permissions\"\n          >\n            <mat-option *ngFor=\"let option of roleOptions\" [value]=\"option\">\n              {{ option }}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n      </ng-template>\n      <ng-template #actionsTemplate>\n        <btns-cancel-ok\n          okIcon=\"done\"\n          okLabel=\"Set Permissions\"\n          (clickedCancel)=\"onCancel()\"\n          (clickedOk)=\"onSubmit()\"\n        >\n        </btns-cancel-ok>\n      </ng-template>\n    </base-dialog>\n  `,\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppDialogPermissionsSetComponent implements OnDestroy {\n  items: CoreTypes.ResFile[];\n  roleControl = new FormControl('READER');\n  roleOptions: CoreTypes.PermissionsRole[] = ['OWNER', 'WRITER', 'READER'];\n\n  entityTypeControl = new FormControl('group');\n  entityTypeOptions: ('user' | 'group')[] = ['user', 'group'];\n  entityControl = new FormControl();\n\n  $users: Observable<NameUid[]>;\n  $groups: Observable<NameUid[]>;\n\n  destroyed = new Subject();\n\n  constructor(\n    private logger: LoggerService,\n    public dialogRef: MatDialogRef<AppDialogPermissionsSetComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: PermissionsDialogInterface\n  ) {\n    this.items = data.files;\n    const config = data.config;\n    this.$users = config.users;\n    this.$groups = config.groups;\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n  }\n\n  get EntityControlLabel() {\n    return this.entityTypeControl.value === 'user' ? 'User' : 'Group';\n  }\n\n  get HasSelectedUser() {\n    return this.entityTypeControl.value === 'user';\n  }\n\n  onSubmit() {\n    const choosenValue = this.entityControl.value as NameUid;\n    const entity = choosenValue.uid;\n    const response: PermissionsDialogResponseInterface = {\n      role: this.roleControl.value,\n      entity: entity,\n      files: this.data.files\n    };\n    this.logger.info('onSubmit', { entity, choosenValue, response });\n    this.dialogRef.close(response);\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n}\n","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n  template: `\n    <base-dialog\n      [header]=\"headerTemplate\"\n      [body]=\"bodyTemplate\"\n      [actions]=\"actionsTemplate\"\n    >\n      <ng-template #headerTemplate>\n        <h2>My Details</h2>\n      </ng-template>\n      <ng-template #bodyTemplate>\n        <div>\n          The following details were\n        </div>\n      </ng-template>\n      <ng-template #actionsTemplate>\n        <btns-cancel-ok\n          okIcon=\"done\"\n          okLabel=\"Create Folder\"\n          (clickedCancel)=\"onCancel()\"\n          (clickedOk)=\"onSubmit()\"\n        >\n        </btns-cancel-ok>\n      </ng-template>\n    </base-dialog>\n  `,\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppDialogMyDetailsComponent {\n\n  constructor(public dialogRef: MatDialogRef<AppDialogMyDetailsComponent>) {}\n\n  onSubmit() {\n    this.dialogRef.close();\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'btns-cancel-ok',\n  template: `\n    <div class=\"full-width text-center\">\n      <button mat-raised-button (click)=\"clickedCancel.emit()\">\n        <mat-icon>clear</mat-icon>\n        Cancel\n      </button>\n      <button\n        mat-raised-button\n        color=\"primary\"\n        (click)=\"clickedOk.emit()\"\n        [disabled]=\"okDisabled\"\n      >\n        <mat-icon>{{ okIcon }}</mat-icon>\n        {{ okLabel }}\n      </button>\n    </div>\n  `,\n  styles: [\n    `\n      button {\n        margin: 5px;\n      }\n    `\n  ]\n})\nexport class AppBtnsCancelOkComponent {\n  @Input()\n  okDisabled: boolean;\n  @Input()\n  okIcon: string;\n  @Input()\n  okLabel: string;\n  @Output()\n  clickedOk = new EventEmitter<void>();\n  @Output()\n  clickedCancel = new EventEmitter<void>();\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  OnInit,\n  OnDestroy\n} from '@angular/core';\nimport { CoreTypes } from '../../../core-types';\nimport { Subject } from 'rxjs';\nimport { LoggerService } from '../../services/logging/logger.service';\nimport { ActionHandlersService } from '../main-file-manager/action-handlers.service';\nimport { ClientFileSystemService } from '../../services/pure/client-filesystem.service';\nimport { OptimisticFilesystemService } from '../../services/pure/optimistic-filesystem.service';\nimport { takeUntil } from 'rxjs/operators';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { MainActionDefinition } from '../actions-toolbars/MainActionDefinition';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'app-file-table-mini-folder-browser',\n  template: `\n    <div class=\"full-width mini-browser-height\">\n      <actions-mini-browser [mainActions]=\"mainActions\"> </actions-mini-browser>\n      <h4 class=\"p5 m0 color-grey\">Folders</h4>\n      <div class=\"flex-col bg-white\">\n        <card-folder\n          *ngFor=\"let folder of folders\"\n          [folder]=\"folder\"\n          [selectedItem]=\"selectedItem\"\n          (enterFolder)=\"onEnterFolder($event)\"\n        >\n        </card-folder>\n      </div>\n    </div>\n  `,\n  providers: [\n    ActionHandlersService,\n    ClientFileSystemService,\n    OptimisticFilesystemService\n  ],\n  styles: [\n    `\n      .mini-browser-height {\n        min-height: 400px;\n        max-height: 80vh;\n      }\n      .bg-white {\n        background-color: #fff;\n      }\n    `\n  ],\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppFileTableMiniFolderBrowserComponent\n  implements OnInit, OnDestroy {\n  selectedItem = new SelectionModel<string>(false);\n\n  @Input()\n  folders: CoreTypes.ResFile[];\n  @Input()\n  mainActions: MainActionDefinition[];\n  @Output()\n  enterDirectory = new EventEmitter<string>();\n  @Output()\n  selectedDirectory = new EventEmitter<string>();\n\n  destroyed = new Subject();\n\n  constructor(private logger: LoggerService) {}\n\n  async ngOnInit() {\n    this.selectedItem.changed.pipe(takeUntil(this.destroyed)).subscribe(() => {\n      const selectedDir = this.selectedItem.selected[0];\n      this.selectedDirectory.emit(selectedDir);\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n  }\n\n  async onEnterFolder(folderPath: string) {\n    this.logger.info('onEnterFolder', { folderPath });\n    this.enterDirectory.emit(folderPath);\n    this.selectedDirectory.emit(folderPath);\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { MainActionDefinition } from '../actions-toolbars/MainActionDefinition';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'actions-mini-browser',\n  template: `\n    <mat-toolbar color=\"primary\" *ngIf=\"this.mainActions\">\n      <mat-toolbar-row class=\"top-toolbar\">\n        <span class=\"top-toolbar-label\">\n          Actions\n        </span>\n      </mat-toolbar-row>\n      <mat-toolbar-row class=\"action-toolbar scroll-x\">\n        <div *ngFor=\"let action of mainActions\">\n          <button\n            class=\"action has-pointer\"\n            mat-raised-button\n            [color]=\"action.color\"\n            (click)=\"action.onClick(action)\"\n            [disabled]=\"action.$disabled | async\"\n          >\n            <mat-icon inline=\"true\">{{ action.icon }}</mat-icon>\n            {{ action.label }}\n          </button>\n        </div>\n      </mat-toolbar-row>\n    </mat-toolbar>\n  `,\n  styles: [\n    `\n      button.action {\n        margin-right: 10px;\n      }\n    `\n  ],\n  styleUrls: ['../shared-utility-styles.scss']\n})\nexport class AppActionsMiniBrowserComponent {\n  @Input()\n  mainActions: MainActionDefinition[];\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n/*\n * Convert bytes into largest possible unit.\n * Takes an precision argument that defaults to 2.\n * Usage:\n *   bytes | fileSize:precision\n * Example:\n *   {{ 1024 |  fileSize}}\n *   formats to: 1 KB\n*/\n@Pipe({name: 'fileSize'})\nexport class FileSizePipe implements PipeTransform {\n\n  private units = [\n    'bytes',\n    'KB',\n    'MB',\n    'GB',\n    'TB',\n    'PB'\n  ];\n\n  transform(bytesInput, precision: number = 0 ): string {\n    let bytes = +bytesInput;\n    if (!isFinite( bytes )) {\n      return '?';\n    }\n    let unit = 0;\n    while ( bytes >= 1024 ) {\n      bytes /= 1024;\n      unit ++;\n    }\n\n    return bytes.toFixed( + precision ) + ' ' + this.units[ unit ];\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FileSizePipe } from './file-size.pipe';\nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  imports: [CommonModule],\n  exports: [FileSizePipe],\n  declarations: [FileSizePipe],\n  providers: [],\n})\nexport class FileSizeModule { }\n","import { Component, Input } from '@angular/core';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { CoreTypes } from '../../../core-types';\nimport { FileActionDefinition } from './FileActionDefinition';\n\n@Component({\n  selector: 'card-file',\n  template: `\n    <div\n      class=\"flex-row p5 space-between bg-grey-hover rounded\"\n      matTooltip=\"Click For Details\"\n      [class.bg-grey-light]=\"isChecked\"\n      [class.bg-grey-dark]=\"isSelected\"\n      (click)=\"onSelect()\"\n    >\n      <div class=\"flex-row align-center\">\n        <mat-icon\n          *ngIf=\"!isChecked\"\n          class=\"color-white color-grey-hover\"\n          (click)=\"onCheck()\"\n          >check_box_outline_blank</mat-icon\n        >\n        <mat-icon\n          *ngIf=\"isChecked\"\n          class=\"color-black color-grey-hover\"\n          (click)=\"onUnCheck()\"\n          >check_box_outline</mat-icon\n        >\n        <img class=\"mr-10\" width=\"30\" [src]=\"file['icon']\" />\n        <div>\n          <h5 class=\"m0 mb-5 has-ellipsis\">{{ file.name }}</h5>\n          <small class=\"m0 color-grey\">{{ file.size | fileSize }}</small>\n        </div>\n      </div>\n      <div class=\"flex-row align-center\">\n        <button\n          mat-icon-button\n          [matMenuTriggerFor]=\"menu\"\n          aria-label=\"Example icon-button with a menu\"\n        >\n          <mat-icon>more_vert</mat-icon>\n        </button>\n      </div>\n    </div>\n    <mat-menu #menu=\"matMenu\">\n      <button\n        mat-menu-item\n        *ngFor=\"let action of actions\"\n        (click)=\"action.onClick(file)\"\n      >\n        <mat-icon [color]=\"action.color\">{{ action.icon }}</mat-icon>\n        <span>{{ action.label }}</span>\n      </button>\n    </mat-menu>\n  `,\n  styleUrls: ['../shared-utility-styles.scss'],\n  styles: [``]\n})\nexport class CardFileComponent {\n  get isChecked(): boolean {\n    return this.checkedItems.isSelected(this.file.fullPath);\n  }\n  get isSelected(): boolean {\n    return this.selectedItem.isSelected(this.file.fullPath);\n  }\n\n  @Input()\n  file: CoreTypes.ResFile;\n  @Input()\n  actions: FileActionDefinition[];\n  @Input()\n  checkedItems: SelectionModel<string>;\n  @Input()\n  selectedItem: SelectionModel<string>;\n\n  onSelect() {\n    this.selectedItem.select(this.file.fullPath);\n  }\n  onCheck() {\n    this.checkedItems.select(this.file.fullPath);\n  }\n  onUnCheck() {\n    this.checkedItems.deselect(this.file.fullPath);\n  }\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { CoreTypes } from '../../../core-types';\nimport { FileActionDefinition } from './FileActionDefinition';\nimport { FileManagerConfig } from '../../configuration/client-configuration';\n\n@Component({\n  selector: 'card-folder',\n  template: `\n    <div\n      class=\"flex-row p5 space-between bg-grey-hover rounded\"\n      matTooltip=\"Click For Details\"\n      [class.bg-grey-light]=\"isChecked\"\n      [class.bg-grey-dark]=\"isSelected\"\n      (click)=\"onSelect()\"\n      (dblclick)=\"onDoubleClick()\"\n    >\n      <div class=\"flex-row align-center\">\n        <div *ngIf=\"checkedItems\">\n          <mat-icon\n            *ngIf=\"!isChecked\"\n            class=\"has-pointer color-white color-grey-hover\"\n            (click)=\"onCheck()\"\n            >check_box_outline_blank</mat-icon\n          >\n          <mat-icon\n            *ngIf=\"isChecked\"\n            class=\"has-pointer color-black color-grey-hover\"\n            (click)=\"onUnCheck()\"\n            >check_box_outline</mat-icon\n          >\n        </div>\n        <img class=\"mr-10\" width=\"30\" [src]=\"folder['icon']\" />\n        <div>\n          <h5 class=\"m0 mb-5 has-ellipsis\">{{ folder.name }}</h5>\n          <small *ngIf=\"config && config.folderSizePath\" class=\"m0 color-grey\">{{ getFolderSize(folder) | fileSize }}</small>\n        </div>\n      </div>\n      <button\n        *ngIf=\"actions\"\n        mat-icon-button\n        [matMenuTriggerFor]=\"menu\"\n        aria-label=\"Example icon-button with a menu\"\n      >\n        <mat-icon>more_vert</mat-icon>\n      </button>\n    </div>\n    <mat-menu #menu=\"matMenu\">\n      <button\n        mat-menu-item\n        *ngFor=\"let action of actions\"\n        (click)=\"action.onClick(folder)\"\n      >\n        <mat-icon [color]=\"action.color\">{{ action.icon }}</mat-icon>\n        <span>{{ action.label }}</span>\n      </button>\n    </mat-menu>\n  `,\n  styleUrls: ['../shared-utility-styles.scss'],\n  styles: [``]\n})\nexport class CardFolderComponent {\n  get isChecked(): boolean {\n    if (!this.checkedItems) {\n      return;\n    }\n    return this.checkedItems.isSelected(this.folder.fullPath);\n  }\n  get isSelected(): boolean {\n    return this.selectedItem.isSelected(this.folder.fullPath);\n  }\n  @Input()\n  folder: CoreTypes.ResFile;\n  @Input()\n  actions: FileActionDefinition[];\n  @Input()\n  checkedItems: SelectionModel<string>;\n  @Input()\n  selectedItem: SelectionModel<string>;\n  @Input()\n  config: FileManagerConfig;\n  @Output()\n  enterFolder = new EventEmitter<string>();\n\n  onSelect() {\n    this.selectedItem.select(this.folder.fullPath);\n  }\n  onCheck() {\n    this.checkedItems.select(this.folder.fullPath);\n  }\n  onUnCheck() {\n    this.checkedItems.deselect(this.folder.fullPath);\n  }\n  onDoubleClick() {\n    console.log('onDoubleClick!');\n    this.enterFolder.emit(this.folder.fullPath);\n  }\n\n  getFolderSize(folder: CoreTypes.ResFile) {\n    if(folder.metaData) {\n      let path = this.config.folderSizePath\n      return path.split('.').reduce(function(p,prop) { return p[prop] }, folder);\n    }\n    return folder.size\n  }\n}\n","import {\n  Component,\n  Input,\n  OnInit,\n  Output,\n  EventEmitter,\n  OnDestroy\n} from '@angular/core';\nimport { CoreTypes } from '../../../core-types';\nimport { Subject, Observable } from 'rxjs';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { takeUntil } from 'rxjs/operators';\nimport { FileActionDefinition } from './FileActionDefinition';\nimport { FileManagerConfig } from '../../configuration/client-configuration';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'app-file-table',\n  template: `\n    <div class=\"files-viewer full-width\">\n      <div *ngIf=\"folders?.length\" class=\"flex-row align-center\">\n        <mat-icon\n          *ngIf=\"!areAllFoldersChecked\"\n          class=\"has-pointer color-white color-grey-hover\"\n          (click)=\"onCheckAllFolders()\"\n          >check_box_outline_blank</mat-icon\n        >\n        <mat-icon\n          *ngIf=\"areAllFoldersChecked\"\n          class=\"has-pointer color-black color-grey-hover\"\n          (click)=\"onUnCheckAllFolders()\"\n          >check_box_outline</mat-icon\n        >\n        <h4 class=\"p5 m0 color-grey\">Folders</h4>\n      </div>\n      <div class=\"flex-col\">\n        <card-folder\n          *ngFor=\"let folder of folders\"\n          [folder]=\"folder\"\n          [config]=\"config\"\n          [checkedItems]=\"checkedItems\"\n          [selectedItem]=\"selectedItem\"\n          [actions]=\"folderActions\"\n          (enterFolder)=\"enterFolder.emit($event)\"\n        >\n        </card-folder>\n      </div>\n      <div *ngIf=\"files?.length\" class=\"flex-row align-center\">\n        <mat-icon\n          *ngIf=\"!areAllFilesChecked\"\n          class=\"has-pointer color-white color-grey-hover\"\n          (click)=\"onCheckAllFiles()\"\n          >check_box_outline_blank</mat-icon\n        >\n        <mat-icon\n          *ngIf=\"areAllFilesChecked\"\n          class=\"has-pointer color-black color-grey-hover\"\n          (click)=\"onUnCheckAllFiles()\"\n          >check_box_outline</mat-icon\n        >\n        <h4 class=\"p5 m0 color-grey\">Files</h4>\n      </div>\n      <div class=\"flex-col\">\n        <card-file\n          *ngFor=\"let file of files\"\n          [file]=\"file\"\n          [checkedItems]=\"checkedItems\"\n          [selectedItem]=\"selectedItem\"\n          [actions]=\"fileActions\"\n        >\n        </card-file>\n      </div>\n      <div class=\"nothing-here\" *ngIf=\"!files?.length && !folders.length\">\n        <p>\n          No folders/files here\n        </p>\n      </div>\n    </div>\n  `,\n  styleUrls: ['../shared-utility-styles.scss'],\n  styles: [\n    `\n      .nothing-here {\n        padding: 20px;\n        padding-bottom: 100px;\n        font-size: 1.2em;\n        color: #777;\n      }\n      .files-viewer {\n        min-height: 500px;\n      }\n    `\n  ]\n})\nexport class AppFileTableComponent implements OnInit, OnDestroy {\n  checkedItems = new SelectionModel<string>(true);\n  selectedItem = new SelectionModel<string>(false);\n\n  clearSelected = new Subject();\n\n  @Input()\n  $triggerClearSelected: Observable<void>;\n  @Input()\n  fileActions: FileActionDefinition[];\n  @Input()\n  folderActions: FileActionDefinition[];\n  @Input()\n  files: CoreTypes.ResFile[];\n  @Input()\n  folders: CoreTypes.ResFile[];\n  @Input()\n  config: FileManagerConfig;\n  @Output()\n  checkedChanged = new EventEmitter<CoreTypes.ResFile[]>();\n  @Output()\n  selectedChanged = new EventEmitter<string>();\n  @Output()\n  enterFolder = new EventEmitter<string>();\n\n  private destroyed = new Subject();\n\n  ngOnInit() {\n    this.$triggerClearSelected\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(() => this.checkedItems.clear());\n    this.checkedItems.changed.pipe(takeUntil(this.destroyed)).subscribe(() => {\n      const folders = this.folders.filter(f =>\n        this.checkedItems.selected.includes(f.fullPath)\n      );\n      const files = this.files.filter(f =>\n        this.checkedItems.selected.includes(f.fullPath)\n      );\n      const checkedFiles = [...folders, ...files];\n      this.checkedChanged.emit(checkedFiles);\n    });\n    this.selectedItem.changed.pipe(takeUntil(this.destroyed)).subscribe(() => {\n      const [selectedFilePath] = this.selectedItem.selected;\n      this.selectedChanged.emit(selectedFilePath);\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n  }\n\n  get areAllFoldersChecked(): boolean {\n    const currentSelection = this.checkedItems.selected;\n    const hasAllFoldersSelected = this.folders.every(f =>\n      currentSelection.includes(f.fullPath)\n    );\n    return hasAllFoldersSelected;\n  }\n\n  get areAllFilesChecked(): boolean {\n    const currentSelection = this.checkedItems.selected;\n    const hasAllFilesSelected = this.files.every(f =>\n      currentSelection.includes(f.fullPath)\n    );\n    return hasAllFilesSelected;\n  }\n\n  onCheckAllFolders() {\n    this.checkedItems.select(...this.folders.map(f => f.fullPath));\n  }\n  onUnCheckAllFolders() {\n    this.checkedItems.deselect(...this.folders.map(f => f.fullPath));\n  }\n  onCheckAllFiles() {\n    this.checkedItems.select(...this.files.map(f => f.fullPath));\n  }\n  onUnCheckAllFiles() {\n    this.checkedItems.deselect(...this.files.map(f => f.fullPath));\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { CardFileComponent } from './card-file.component';\nimport { CardFolderComponent } from './card-folder.component';\nimport { AppFileTableComponent } from './file-table.component';\nimport { CommonModule } from '@angular/common';\n\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatMenuModule } from '@angular/material/menu';\n\nimport { FileSizeModule } from '../file-size/file-size.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FileSizeModule,\n    MatMenuModule,\n    MatIconModule,\n    MatButtonModule,\n    MatTooltipModule\n  ],\n  exports: [AppFileTableComponent, CardFolderComponent],\n  declarations: [CardFileComponent, CardFolderComponent, AppFileTableComponent],\n  providers: []\n})\nexport class AppFileTableModule {}\n","import { NgModule } from '@angular/core';\nimport { AppFileTableMiniFolderBrowserComponent } from './file-table-mini-folder-browser.component';\nimport { AppActionsMiniBrowserComponent } from './actions-mini-browser.component';\nimport { CommonModule } from '@angular/common';\nimport { FileSizeModule } from '../file-size/file-size.module';\n\nimport { AppFileTableModule } from '../file-table/file-table.module';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatToolbarModule } from '@angular/material/toolbar';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FileSizeModule,\n    MatButtonModule,\n    MatIconModule,\n    AppFileTableModule,\n    MatToolbarModule\n  ],\n  exports: [AppFileTableMiniFolderBrowserComponent],\n  declarations: [\n    AppFileTableMiniFolderBrowserComponent,\n    AppActionsMiniBrowserComponent\n  ],\n  providers: []\n})\nexport class FileTableMiniModule {}\n","import {\n  Component,\n  ElementRef,\n  Input,\n  OnInit,\n  ViewChild,\n  OnDestroy,\n} from '@angular/core';\n\nimport { FormControl, Validators } from '@angular/forms';\nimport { COMMA, ENTER } from '@angular/cdk/keycodes';\nimport { Observable } from 'rxjs';\nimport { map, startWith, take } from 'rxjs/operators';\n\nimport { v4 as uuidv1 } from 'uuid';\n\nimport {\n  MatAutocomplete,\n  MatAutocompleteSelectedEvent,\n} from '@angular/material/autocomplete';\nimport { MatChipInputEvent } from '@angular/material/chips';\n\nexport interface Tag {\n  id: string;\n  name: string;\n  isDisabled?: boolean;\n}\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'app-control-tag-multiple',\n  template: `\n    <mat-form-field class=\"full-width\" [class.formInvalid]=\"hasRed()\">\n      <mat-chip-list #chipList [disabled]=\"!removableTags\" [multiple]=\"true\">\n        <mat-chip\n          *ngFor=\"let tag of selectInitial\"\n          [selectable]=\"selectable\"\n          [removable]=\"removableTags\"\n          (removed)=\"removeTag(tag)\"\n        >\n          {{ getLowerCase(tag) }}\n          <mat-icon matChipRemove *ngIf=\"removableTags\">cancel</mat-icon>\n        </mat-chip>\n        <input\n          #tagInput\n          [placeholder]=\"placeholder\"\n          [formControl]=\"controlAutocomplete\"\n          [matAutocomplete]=\"auto\"\n          [matChipInputFor]=\"chipList\"\n          [matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\"\n          [matChipInputAddOnBlur]=\"addOnBlur\"\n          (matChipInputTokenEnd)=\"add($event)\"\n          [name]=\"autoCompleteObscureName\"\n        />\n      </mat-chip-list>\n      <mat-icon\n        matTooltip=\"Add many tags here, you can manage all your tags using the tag list editor in the settings menu\"\n        class=\"tag-icon\"\n        matSuffix\n        matBadge=\"\"\n        >local_offer</mat-icon\n      >\n      <mat-autocomplete\n        #auto=\"matAutocomplete\"\n        (optionSelected)=\"selectedTag($event)\"\n      >\n        <mat-option\n          *ngFor=\"let tag of filteredTags | async\"\n          [value]=\"tag\"\n          [disabled]=\"tag['isDisabled']\"\n        >\n          {{ tag.name }}\n        </mat-option>\n      </mat-autocomplete>\n    </mat-form-field>\n  `,\n  styles: [\n    `\n      .full-width {\n        width: 100%;\n      }\n      .tag-icon {\n        color: grey;\n        right: 15px;\n      }\n      .formInvalid {\n        background-color: #ff4f4f30 !important;\n      }\n      .mat-badge-active {\n        font-size: 18px;\n      }\n      mat-icon span {\n        background-color: transparent;\n        right: 1px !important;\n        top: 1px !important;\n        color: white;\n      }\n    `,\n  ],\n})\nexport class AppControlTagMultipleComponent implements OnInit, OnDestroy {\n  // Autocomplete FormGroup\n  controlAutocomplete: FormControl;\n\n  // Tag defaults\n  visible = true;\n  selectable = true;\n  addOnBlur = true;\n  separatorKeysCodes: number[] = [ENTER, COMMA];\n\n  filteredTags: Observable<Tag[]>;\n  @ViewChild('tagInput', { static: false })\n  tagInput: ElementRef<HTMLInputElement>;\n  @ViewChild('auto', { static: false })\n  matAutocomplete: MatAutocomplete;\n  selectInitial: Tag[];\n\n  // Variables Passed into this component\n  @Input() placeholder: string;\n  @Input() displayLowerCase: boolean;\n  @Input() control: FormControl;\n  @Input() removableTags = true;\n  @Input() allowCustom = true;\n  @Input() selectChoices$: Observable<Tag[]> = new Observable();\n\n  autoCompleteObscureName: string; // to prevent autocomplete from realising the field name\n\n  checkExists(val, name) {\n    if (val == null) {\n      throw new Error(name + ' has not been defined');\n    }\n  }\n\n  hasRed() {\n    const isDirty = this.control.dirty;\n    const notValid = this.control.invalid;\n    return isDirty && notValid;\n  }\n\n  ngOnInit() {\n    this.checkExists(this.control, 'this.group');\n    this.checkExists(this.selectChoices$, 'this.selectChoices');\n    this.selectInitial = this.control.value;\n\n    this.autoCompleteObscureName = uuidv1();\n\n    this.selectChoices$ = this.selectChoices$.pipe(take(1));\n    this.controlAutocomplete = new FormControl([], Validators.minLength(1));\n    // When selectChoices resolves (once)\n    this.selectChoices$.subscribe((selectChoicesArr) => {\n      // set the tags filtering pipe\n      this.filteredTags = this.controlAutocomplete.valueChanges.pipe(\n        startWith(null),\n        map((keyboardInput: string) => {\n          console.log({ keyboardInput }, { selectChoicesArr });\n          // Filter based on the input value\n          if (!keyboardInput) {\n            return selectChoicesArr;\n          }\n          return selectChoicesArr.filter((tag) => {\n            if (!tag) {\n              return false;\n            }\n            const val = tag.name + '';\n            if (!val.includes(keyboardInput)) {\n              return false;\n            }\n            return true;\n          });\n        })\n      );\n    });\n\n    // Add the initial values if they're passed in\n    this.controlAutocomplete.setValue(this.selectInitial);\n    this.control.markAsUntouched();\n  }\n\n  ngOnDestroy() {}\n\n  // Allow custom tags, if the selection box is not open\n  add(event: MatChipInputEvent): void {\n    if (!this.allowCustom) {\n      return;\n    }\n    if (!this.matAutocomplete.isOpen) {\n      const input = event.input;\n      const value = event.value;\n\n      // Add our Tag\n      if ((value || '').trim()) {\n        const newTagId = uuidv1();\n        const val = value.trim();\n        const newTag: Tag = {\n          id: newTagId,\n          name: val,\n        };\n        this.control.value.push(newTag);\n      }\n\n      // Reset the input value\n      if (input) {\n        input.value = '';\n      }\n      this.updateFormValue();\n    }\n  }\n\n  removeTag(removeTag: Tag): void {\n    const index = this.control.value.findIndex((t) => t.id === removeTag.id);\n\n    if (index >= 0) {\n      this.control.value.splice(index, 1);\n    }\n    this.updateFormValue();\n  }\n\n  selectedTag(event: MatAutocompleteSelectedEvent): void {\n    console.log(event);\n    const newVal = event.option.value;\n    let canPush = true;\n    this.control.value.forEach((item) => {\n      canPush = item.id !== newVal.id && canPush;\n    });\n    if (canPush) this.control.value.push(newVal);\n    this.tagInput.nativeElement.value = '';\n    this.tagInput.nativeElement.blur();\n    this.updateFormValue();\n  }\n\n  updateFormValue() {\n    this.controlAutocomplete.reset();\n    this.control.setValue(this.control.value); // Required to trigger value changes\n    this.control.markAsDirty();\n  }\n\n  getLowerCase(tag) {\n    if (!tag || !tag.name) {\n      return null;\n    }\n    const val = tag.name + '';\n    return val.toLowerCase();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { AppControlTagMultipleComponent } from './tags-control.component';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\n\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatFormFieldModule } from '@angular/material/form-field';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    MatChipsModule,\n    MatAutocompleteModule,\n    MatIconModule,\n    MatInputModule,\n    MatFormFieldModule\n  ],\n  exports: [AppControlTagMultipleComponent],\n  declarations: [AppControlTagMultipleComponent],\n  providers: []\n})\nexport class TagsControlModule {}\n","import { NgModule } from '@angular/core';\nimport { BaseDialogComponent } from './base-dialog.component';\nimport { AppDialogRenameComponent } from './dialog-rename.component';\nimport { AppDialogNewFolderComponent } from './dialog-new-folder.component';\nimport { AppDialogPermissionsSetComponent } from './dialog-permissions-set.component';\nimport { AppDialogPermissionsSetObjectComponent } from './dialog-permissions-setobject.component';\nimport { AppDialogCopyComponent } from './dialog-copy-or-move.component';\nimport { AppDialogUploadFilesComponent } from './dialog-upload.component';\nimport { AppDialogMyDetailsComponent } from './dialog-my-details.components';\nimport { CommonModule } from '@angular/common';\n\nimport { AppBtnsCancelOkComponent } from './btns-cancel-ok.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { FileTableMiniModule } from '../file-table-mini/file-table-mini.module';\nimport { FormFileFirebaseModule } from '../file-upload/file-upload.module';\nimport { TagsControlModule } from '../tags-control/tags-control.module';\nimport { AppDialogConfirmationComponent } from './dialog-confirmation.component';\n\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatCardModule } from '@angular/material/card';\n\nconst entryComponents = [\n  BaseDialogComponent,\n  AppDialogRenameComponent,\n  AppDialogNewFolderComponent,\n  AppDialogPermissionsSetComponent,\n  AppDialogPermissionsSetObjectComponent,\n  AppDialogCopyComponent,\n  AppDialogUploadFilesComponent,\n  AppDialogMyDetailsComponent,\n  AppDialogConfirmationComponent\n];\n\nconst declarations = [...entryComponents, AppBtnsCancelOkComponent];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    FormFileFirebaseModule,\n    MatChipsModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatButtonModule,\n    MatInputModule,\n    MatIconModule,\n    MatSelectModule,\n    MatCardModule,\n    FileTableMiniModule,\n    TagsControlModule\n  ],\n  exports: [...entryComponents],\n  entryComponents: [...entryComponents],\n  declarations: [...declarations],\n  providers: []\n})\nexport class NgxFilemanagerClientDialogsModule {}\n","import { NgModule } from '@angular/core';\nimport { APP_BASE_HREF, CommonModule, PlatformLocation } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { getBaseHref } from './getBaseHref';\nimport { LibMainFileManagerComponent } from './ui/main-file-manager/main-file-manager.component';\nimport { AppBreadCrumbsComponent } from './ui/bread-crumbs/bread-crumbs.component';\nimport { AppBulkActionsComponent } from './ui/actions-toolbars/bulk-actions.component';\nimport { AppMainActionsComponent } from './ui/actions-toolbars/main-actions.component';\nimport { FileDetailsComponent } from './ui/file-details/file-details.component';\nimport { FormFileFirebaseModule } from './ui/file-upload/file-upload.module';\nimport { FilemanagerStatusService } from './services/state/status.service';\nimport { NotificationService } from './services/pure/notification.service';\nimport { LoggerService } from './services/logging/logger.service';\nimport { ConsoleLoggerService } from './services/logging/console-logger.service';\nimport { ServerFilesystemProviderService } from './services/pure/server-filesystem.service';\nimport { IconUrlResolverService } from './services/pure/icon-url-resolver.service';\nimport { NgxFilemanagerClientDialogsModule } from './ui/dialogs/dialogs.module';\nimport { FileSizeModule } from './ui/file-size/file-size.module';\nimport { AppFileTableModule } from './ui/file-table/file-table.module';\n\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatExpansionModule } from '@angular/material/expansion';\n\nconst declarations = [\n  LibMainFileManagerComponent,\n  AppBreadCrumbsComponent,\n  AppBulkActionsComponent,\n  AppMainActionsComponent,\n  FileDetailsComponent,\n];\n\n@NgModule({\n  declarations: declarations,\n  imports: [\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    ReactiveFormsModule,\n    FileSizeModule,\n\n    AppFileTableModule,\n    FormFileFirebaseModule,\n    NgxFilemanagerClientDialogsModule,\n\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCheckboxModule,\n    MatChipsModule,\n    MatCardModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatIconModule,\n    MatInputModule,\n    MatMenuModule,\n    MatPaginatorModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    MatSelectModule,\n    MatSidenavModule,\n    MatSnackBarModule,\n    MatSortModule,\n    MatTableModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    MatExpansionModule\n  ],\n  exports: [LibMainFileManagerComponent],\n  providers: [\n    ServerFilesystemProviderService,\n    FilemanagerStatusService,\n    NotificationService,\n    {\n      provide: APP_BASE_HREF,\n      useFactory: getBaseHref,\n      deps: [PlatformLocation]\n    },\n    { provide: LoggerService, useClass: ConsoleLoggerService },\n    IconUrlResolverService\n  ]\n})\nexport class NgxFilemanagerClientFirebaseModule { }\n","import path from 'path-browserify';\nimport { CoreTypes, FileSystemProvider } from '../../../core-types';\nimport { ConsoleLoggerService } from '../logging/console-logger.service';\nimport {\n  EnsureTrailingSlash,\n  Add2ToPathDir,\n  Add2ToPath,\n  EnsureNoTrailingSlash\n} from '../../utils/path-helpers';\nimport { stubFiles, MakeDir, MakeFile } from './stub-files';\n\nexport class FileSystemStub implements FileSystemProvider {\n  private fakeDelayMs = 1000;\n  logger = new ConsoleLoggerService();\n\n  files: CoreTypes.ResFile[] = stubFiles;\n\n  public setFakeDelay(newDelay: number) {\n    this.fakeDelayMs = newDelay;\n  }\n\n  private async fakeDelay() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve();\n      }, this.fakeDelayMs);\n    });\n  }\n  private selectMatches(items: string[], isMatch: boolean) {\n    const itemsSet = new Set(items);\n    if (isMatch) {\n      return this.files.filter(f => itemsSet.has(f.fullPath));\n    } else {\n      return this.files.filter(f => !itemsSet.has(f.fullPath));\n    }\n  }\n  private isInDirectory(dirPath, filePath): boolean {\n    try {\n      const relative = path.relative(dirPath, filePath);\n      const isSubdir =\n        relative && !relative.startsWith('..') && !relative.includes('/');\n      return isSubdir;\n    } catch (error) {\n      this.logger.warn('isInDirectory error', { dirPath, filePath, error });\n      return false;\n    }\n  }\n\n  async List(inputPath: string): Promise<CoreTypes.ResBodyList> {\n    await this.fakeDelay();\n    const folderPath = this.ensurePrefixSlash(\n      this.ensureTrailingSlash(inputPath)\n    );\n    const matches = this.files.filter(k =>\n      this.isInDirectory(folderPath, k.fullPath)\n    );\n    this.logger.info('List', { folderPath, files: this.files, matches });\n    return {\n      result: matches\n    };\n  }\n  async Rename(\n    item: string,\n    newItemPath: string\n  ): Promise<CoreTypes.ResBodyRename> {\n    await this.fakeDelay();\n    const baseName = path.basename(newItemPath);\n    this.selectMatches([item], true).map(match => {\n      match.name = baseName;\n      match.fullPath = newItemPath;\n    });\n    return null;\n  }\n  async Move(item: string, newPath: string): Promise<CoreTypes.ResBodyMove> {\n    await this.fakeDelay();\n    this.selectMatches([item], true).map(match => {\n      match.fullPath = newPath;\n    });\n    return null;\n  }\n  async Copy(\n    singleFileName: string,\n    newPath: string\n  ): Promise<CoreTypes.ResBodyCopy> {\n    await this.fakeDelay();\n    this.selectMatches([singleFileName], true).map(match => {\n      const copy = { ...match };\n      copy.fullPath = newPath;\n      this.files.push(copy);\n    });\n    return null;\n  }\n  async Edit(item: string, content: string): Promise<CoreTypes.ResBodyEdit> {\n    await this.fakeDelay();\n    this.selectMatches([item], true).map(match => {\n      match['content'] = content;\n    });\n    return null;\n  }\n  async Getcontent(item: string): Promise<CoreTypes.ResBodyGetContent> {\n    await this.fakeDelay();\n    const matches = this.selectMatches([item], true);\n    return [...matches].pop()['content'];\n  }\n  async GetSingle(item: string): Promise<CoreTypes.ResBodyGetSingle> {\n    await this.fakeDelay();\n    const matches = this.selectMatches([item], true);\n    const file = [...matches].pop();\n    return {\n      result: {\n        file,\n        url: file.downloadUrl,\n        success: true\n      }\n    };\n  }\n  async CreateFolder(newPath: string, disableNoClobber?: boolean): Promise<CoreTypes.ResBodyCreateFolder> {\n    await this.fakeDelay();\n    if (disableNoClobber ) {\n      const directoryPath = EnsureTrailingSlash(newPath);\n      this.files.push(MakeDir(directoryPath));\n    } else {\n      this.recursivelyTryToCreateFolder(newPath);\n    }\n    return null;\n  }\n  private recursivelyTryToCreateFolder(newPath: string) {\n    const directoryPath = EnsureTrailingSlash(newPath);\n    const exists = !!this.selectMatches([directoryPath], true).length;\n    if (!exists) {\n      this.files.push(MakeDir(directoryPath));\n      return;\n    }\n    const newPathWith2 = Add2ToPathDir(directoryPath);\n    return this.recursivelyTryToCreateFolder(newPathWith2);\n  }\n  async SetPermissions(\n    item: string,\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity,\n    recursive?: boolean\n  ): Promise<CoreTypes.ResBodySetPermissions> {\n    return this.SetPermissionsMultiple([item], role, entity, recursive);\n  }\n  async CopyMultiple(\n    items: string[],\n    newPath: string\n  ): Promise<CoreTypes.ResBodyCopy> {\n    await this.fakeDelay();\n    this.selectMatches(items, true).map(f => {\n      const copy = { ...f };\n      copy.fullPath = path.join(newPath, f.name);\n      this.files.push(copy);\n    });\n    return null;\n  }\n  async MoveMultiple(\n    items: string[],\n    newPath: string\n  ): Promise<CoreTypes.ResBodyMove> {\n    await this.fakeDelay();\n    this.selectMatches(items, true).map(f => {\n      f.fullPath = path.join(newPath, f.name);\n    });\n    return null;\n  }\n  async SetPermissionsMultiple(\n    items: string[],\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity,\n    recursive?: boolean\n  ): Promise<CoreTypes.ResBodySetPermissions> {\n    await this.fakeDelay();\n    this.logger.info('file-system-stub: SetPermissionsMultiple', {\n      items,\n      files: this.files\n    });\n    return this.recursivelySetPermissions(items, role, entity, recursive);\n  }\n  async Upload(item: string): Promise<boolean> {\n    await this.fakeDelay();\n    this.recursivelyTryToAddFile(item);\n    return null;\n  }\n  private recursivelyTryToAddFile(filePath: string) {\n    const parsedFilePath = EnsureNoTrailingSlash(filePath);\n    const exists = !!this.selectMatches([parsedFilePath], true).length;\n    if (!exists) {\n      this.files.push(MakeFile(parsedFilePath));\n      return;\n    }\n    const newPathWith2 = Add2ToPath(parsedFilePath);\n    return this.recursivelyTryToAddFile(newPathWith2);\n  }\n  recursivelySetPermissions(\n    items: string[],\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity,\n    recursive?: boolean\n  ) {\n    const matches = this.selectMatches(items, true);\n    matches.map(item => {\n      this.setSinglePermission(item, role, entity);\n      const isFolder = item.type === 'dir';\n      if (recursive && isFolder) {\n        this.recursivelySetPermissions(\n          [item.fullPath],\n          role,\n          entity,\n          recursive\n        );\n      }\n    });\n    return null;\n  }\n  private setSinglePermission(\n    item: CoreTypes.ResFile,\n    role: CoreTypes.PermissionsRole,\n    entity: CoreTypes.FilePermissionEntity\n  ) {\n    let list: string[];\n    if (role === 'READER') {\n      list = item.permissions.readers;\n    }\n    if (role === 'WRITER') {\n      list = item.permissions.writers;\n    }\n    const inListAlready = list.includes(entity);\n    if (!inListAlready) {\n      list.push(entity);\n    }\n  }\n  async SetPermissionsObjectMultiple(\n    items: string[],\n    permissionsObj: CoreTypes.FilePermissionsObject,\n    recursive?: boolean\n  ): Promise<CoreTypes.ResBodySetPermissions> {\n    await this.fakeDelay();\n    const matches = this.selectMatches(items, true);\n    this.logger.info('file-system-stub: SetPermissionsMultiple', {\n      items,\n      matches,\n      permissionsObj\n    });\n    this.recursivelySetPermissionsObjects(items, permissionsObj, recursive);\n    return null;\n  }\n  recursivelySetPermissionsObjects(\n    items: string[],\n    permissionsObj: CoreTypes.FilePermissionsObject,\n    recursive?: boolean\n  ) {\n    const matches = this.selectMatches(items, true);\n    matches.map(item => {\n      item.permissions = permissionsObj;\n      const isFolder = item.type === 'dir';\n      if (recursive && isFolder) {\n        this.recursivelySetPermissionsObjects(\n          [item.fullPath],\n          permissionsObj,\n          recursive\n        );\n      }\n    });\n    return null;\n  }\n\n  async Remove(items: string[]): Promise<CoreTypes.ResBodyRemove> {\n    await this.fakeDelay();\n    const itemsSet = new Set(items);\n    const itemsNotDeleted = this.files.filter(f => !itemsSet.has(f.fullPath));\n    this.files = itemsNotDeleted;\n    return null;\n  }\n\n  CloneProvider(): FileSystemProvider {\n    return new FileSystemStub();\n  }\n\n  private ensureTrailingSlash(inputPath: string) {\n    const hasTrailing = inputPath.slice(-1) === '/';\n    if (hasTrailing) {\n      return inputPath;\n    }\n    return inputPath + '/';\n  }\n  private ensurePrefixSlash(inputPath: string) {\n    const hasPrefix = inputPath.slice(0, 1) === '/';\n    if (hasPrefix) {\n      return inputPath;\n    }\n    return '/' + inputPath;\n  }\n\n  GetUploadApiUrl(currentPath: string): string {\n    return 'https://httpbin.org/post';\n  }\n\n  async CreateDownloadLink(file: CoreTypes.ResFile): Promise<string> {\n    return 'https://upload.wikimedia.org/wikipedia/commons/8/85/Exponential_Function_%28Abs_Imag_Part_at_Infinity%29_Density.png';\n  }\n}\n"],"names":["Injectable","FormControl","path","Component","MatDialogRef","Inject","MAT_DIALOG_DATA","Subject","BehaviorSubject","combineLatest","map","takeUntil","tap","uuidv4","MatSnackBar","APP_BASE_HREF","path.dirname","path.basename","take","filter","auditTime","uuid","MatDialog","FormGroup","Validators","of","Input","EventEmitter","Output","fileIcons","getFileIconName","getFileExtension","isFileImage","getFileName","Directive","firebase.default","timer","NG_VALUE_ACCESSOR","forwardRef","NG_VALIDATORS","NgModule","CommonModule","FormsModule","ReactiveFormsModule","MatProgressBarModule","MatInputModule","MatIconModule","HttpClient","SelectionModel","Pipe","MatMenuModule","MatButtonModule","MatTooltipModule","MatToolbarModule","ENTER","COMMA","Observable","uuidv1","startWith","ViewChild","MatChipsModule","MatAutocompleteModule","MatFormFieldModule","MatDialogModule","MatSelectModule","MatCardModule","declarations","HttpClientModule","MatButtonToggleModule","MatCheckboxModule","MatPaginatorModule","MatProgressSpinnerModule","MatSidenavModule","MatSnackBarModule","MatSortModule","MatTableModule","MatTabsModule","MatExpansionModule","PlatformLocation"],"mappings":"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"}